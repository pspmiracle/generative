{"version":3,"sources":["sketches/022_snowman/shaders/floor/frag.glsl","sketches/022_snowman/shaders/glass/frag.glsl","sketches/022_snowman/shaders/general/vert.glsl","sketches/022_snowman/shaders/snow/frag.glsl","sketches/022_snowman/shaders/snow/vert.glsl","../node_modules/soundcloud-audio/index.js","../node_modules/tslib/tslib.es6.js","../node_modules/style-value-types/dist/style-value-types.es.js","../node_modules/framesync/dist/framesync.es.js","../node_modules/@popmotion/popcorn/dist/popcorn.es.js","../node_modules/stylefire/dist/stylefire.es.js","../node_modules/popmotion/dist/popmotion.es.js","sketches/022_snowman/index.js"],"names":["anchor","keys","split","_parseURL","url","document","createElement","result","href","i","len","length","key","_appendQueryParam","param","value","U","chr","test","search","protocol","host","port","pathname","hash","SoundCloud","clientId","apiUrl","this","console","info","_events","_clientId","_baseUrl","playing","duration","audio","prototype","resolve","callback","resolveUrl","encodeURIComponent","_json","data","cleanData","Array","isArray","tracks","map","_transformTrack","bind","_playlist","_track","stream_url","isNaN","_jsonp","target","getElementsByTagName","head","script","id","Date","valueOf","Math","floor","random","window","parentNode","removeChild","src","insertBefore","xhr","XMLHttpRequest","open","onreadystatechange","readyState","status","resp","JSON","parse","responseText","err","send","track","original_stream_url","replace","on","e","fn","addEventListener","off","removeEventListener","unbindAll","preload","streamUrl","preloadType","play","options","undefined","playlistIndex","_playlistIndex","Error","pause","stop","currentTime","next","tracksLength","loop","previous","seek","percent","offsetX","offsetWidth","layerX","offsetLeft","setVolume","volumePercentage","volume","setTime","seconds","module","exports","extendStatics","d","b","Object","setPrototypeOf","__proto__","p","hasOwnProperty","__extends","__","constructor","create","__assign","assign","t","s","n","arguments","call","apply","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","clamp","min","max","v","sanitize","Number","toFixed","floatRegex","colorRegex","singleColorRegex","number","parseFloat","transform","alpha","createUnitType","default","unit","endsWith","degrees","px","vh","vw","clampRgbUnit","isRgba","red","isHsla","hue","splitColorValues","terms","values","valuesArray","substring","lastIndexOf","rgbUnit","round","isColorString","color","colorType","startsWith","rgba","_a","green","blue","_b","alpha$$1","rgbaTemplate","hsla","saturation","lightness","hslaTemplate","hex","r","g","substr","parseInt","convertNumbersToZero","complex","numValues","foundNumbers","match","foundColors","input","parsed","push","createTransformer","prop","template","token","numColors","numNumbers","output","getAnimatableNone","parsedTarget","targetTransformer","StepId","prevTime","onNextFrame","requestAnimationFrame","timestamp","now","timeToCall","setTimeout","defaultElapsed","useDefaultElapsed","willRunNextFrame","isProcessing","frame","delta","stepsOrder","Read","Update","Render","PostRender","setWillRunNextFrame","willRun","reduce","acc","step","setRunNextFrame","processToRun","processToRunNextFrame","numThisFrame","cancelled","WeakSet","toKeepAlive","renderStep","cancel","process","indexOfCallback","add","splice","process_1","has","schedule","keepAlive","immediate","addToCurrentBuffer","buffer","delete","createStep","sync","startLoop","cancelSync","steps","processStep","stepId","processFrame","forEach","isNum","curryRange","func","cv","clamp$1","mix","from","to","progress","mixLinearColor","fromExpo","toExpo","sqrt","colorTypes","getColorType","find","type","notAnimatable","color$$1","mixColor","fromColorType","toColorType","fromColor","toColor","blended","mixFunc","combineFunctions","a","pipe","transformers","_i","getMixer","origin","mixComplex","mixArray","slice","blendValue","fromThis","analyse","numRGB","numHSL","originStats","targetStats","identity","springForce","alterDisplacement","constant","displacement","springModifiedDisplacement","abs","velocityPerSecond","velocity","frameDuration","rangeSize","Chainable","props","applyMiddleware","middleware","concat","funcs","pipedUpdate","update","while","predicate","complete","filter","Observer","observer","onComplete","_this","isActive","updateObserver","error","m","createObserver","observerCandidate","Action","_super","start","isComplete","subscription","init","observerProps","api","registerParent","action","multi","getCount","getFirst","getOutput","mapApi","setProp","startActions","actions","numActions","updateOutput","numCompletedActions","subs","name","hasCompleted","methodName","composite","args","propKey","starter","parallel","sub","parallel$1","unitTypes","findUnitType","createAction","createArrayAction","vectorKeys","firstVectorKey","actionList","childActionProps","reduceArrayValue","getActionCreator","createObjectAction","actionMap","reduceObjectValue","createUnitAction","unitType","createMixerAction","mixer","createColorAction","createComplexAction","createVectorAction","typeTests","testNames","isVectorProp","getVectorKeys","testVectorProps","some","createVectorTests","testProp","Boolean","isUnitProp","vectorSpring","_c","_d","_e","stiffness","_f","damping","_g","mass","_h","restSpeed","_j","restDelta","initialVelocity","position","prevPosition","timeDelta","dampingRatio","angularFreq","envelope","exp","expoDecay","sin","cos","isBelowVelocityThreshold","isBelowDisplacementThreshold","listen","element","events","eventNames","eventName","defaultPointerPos","clientX","clientY","pageX","pageY","x","y","eventToPoint","point","points","passive","capture","touches","numTouches","thisTouch","THREE","require","global","randomInstance","createRandom","setSeed","ShadowMaterial","opacity","scPlayer","SoundCloudAudio","sketch","context","canvas","ready","el","innerHTML","style","cssText","appendChild","spring","crossOrigin","autoplay","renderer","WebGLRenderer","setClearColor","shadowMap","enabled","PCFSoftShadowMap","camera","PerspectiveCamera","set","controls","OrbitControls","minDistance","maxDistance","scene","Scene","lightMain","HemisphereLight","lightDir1","SpotLight","PI","castShadow","light","shadow","mapSize","width","height","near","far","bias","top","bottom","left","right","floorMaterial","ShaderMaterial","uniforms","iTime","iResolution","Uniform","Vector2","fragmentShader","floorFragmentShader","vertexShader","generalVertexShader","glassMaterial","glassFragmentShader","side","DoubleSide","snowMaterial","shaderPoint","ShaderLib","pSize","camPosition","Vector3","transparent","depthWrite","blending","AdditiveBlending","snowFragmentShader","snowVertexShader","createSnowMaterial","blackMaterial","MeshLambertMaterial","orangeMaterial","geometry","PlaneGeometry","plane","Mesh","rotation","shadowPlane","receiveShadow","snowBalls","material","emissive","setHex","emissiveIntensity","createSnowManMaterial","radius","DodecahedronGeometry","vertices","range","z","mesh","ballRadius","glassGeometry","CircleGeometry","glassMesh","rotateY","copy","rotateX","perGeometry","CylinderGeometry","perMesh","rotateZ","smileWidth","MeshPhongMaterial","rStep","center","hands","rs","originalRotationX","idx","particles","Geometry","particleSystem","Points","sortParticles","resize","pixelRatio","viewportWidth","viewportHeight","setPixelRatio","setSize","aspect","updateProjectionMatrix","render","time","unload","dispose","settings","animate"],"mappings":"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","file":"static/js/10.b78d605f.chunk.js","sourcesContent":["export default \"precision highp float;\\n#define GLSLIFY 1\\n\\nuniform vec2 iResolution;\\nuniform float iTime;\\nuniform float pSize;\\n\\nuniform mat3 uvTransform;\\n\\n#define BLACK_COL vec3(24,32,38)/255.\\n#define WHITE_COL vec3(245,248,250)/255.\\n\\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\\n{\\n  vec2 uv = (fragCoord.xy - iResolution.xy * 0.5) / iResolution.y;\\n\\n  vec2 st = vec2(atan(uv.x, uv.y), length(uv));\\n\\n  st.x += iTime*.1 + floor(st.y * 5. - iTime*1.)*0.3925;\\n\\n  float g = st.x * 3.82 * 2.;\\n  float b1 = fract(g);\\n  float b2 = sin(st.y*100. - iTime * 10.) * .25 + .5;\\n\\n  float gf = floor(mod(g, 2.)) * .6;\\n  float m = step(.125 - st.y*.25 * gf, abs(b2 - b1) );\\n\\n  m = (1.-m) * abs(1. - gf + .1);\\n\\n  vec3 col = mix(BLACK_COL, WHITE_COL, m);\\n\\n  fragColor = vec4(col, 1.0);\\n}\\n\\nvarying vec2 vUv;\\n\\nvoid main() {\\n  mainImage(gl_FragColor, vUv * iResolution.xy);\\n}\\n\";","export default \"precision highp float;\\n#define GLSLIFY 1\\n\\nuniform vec2 iResolution;\\nuniform float iTime;\\nuniform float pSize;\\n\\nuniform mat3 uvTransform;\\n\\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord)\\n{\\n  vec2 uv = (fragCoord - 0.5 * iResolution.xy) / iResolution.y;\\n  vec2 st = vec2(atan(uv.x, uv.y), length(uv));\\n  uv = vec2(st.x / 6.2831 + iTime * 2.0 - st.y * 5.0, st.y);\\n  float smf = .1;\\n  float m = fract(uv.x);\\n  float mask = smoothstep(0., smf, abs(m-.5)-.25);\\n  vec3 col = vec3(0.88, 0, 0.52) * mask;\\n  fragColor = vec4(col, 1.0);\\n}\\n\\nvarying vec2 vUv;\\n\\nvoid main() {\\n  mainImage(gl_FragColor, vUv * iResolution.xy);\\n}\\n\";","export default \"#define GLSLIFY 1\\nvarying vec2 vUv;\\nvarying vec3 vpos;\\n\\nuniform float iTime;\\nuniform float pSize;\\nuniform vec3 camPosition;\\n\\nvoid main() {\\n  vUv = uv;\\n\\n  vpos = position;\\n\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( vpos, 1.0 );\\n}\\n\";","export default \"precision highp float;\\n#define GLSLIFY 1\\n\\nvarying vec3 vpos;\\nvarying float hp;\\nvarying float hp2;\\nvarying float hp3;\\n\\nuniform vec2 iResolution;\\nuniform float iTime;\\nuniform float pSize;\\n\\nuniform mat3 uvTransform;\\n\\n#define hue(h) clamp( abs( fract(h + vec4(3,2,1,0)/3.) * 6. - 3.) -1. , 0., 1.)\\n\\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord){\\n  vec2 uv = (uvTransform * vec3(gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1)).xy - .5;\\n\\n  float t = iTime*.5 + hp; // Делаем время для точки такое же как в vertexShader\\n\\n  float l = length(uv);\\n  float g = l * pSize/2.;\\n  float gx = clamp(.05 / smoothstep(.0, pSize, g), 0., 1.0);\\n  float lim = smoothstep(.5, .3, l);\\n\\n  // Прозрачность считаем от hp3 чтоб все точки были с разной яркостью\\n  fragColor = vec4(hue(hp3*.75 + iTime*hp2).rgb, hp3/(pSize*.25)*gx / g * lim);\\n}\\n\\nvarying vec2 vUv;\\n\\nvoid main() {\\n  mainImage(gl_FragColor, vUv * iResolution.xy);\\n}\\n\";","export default \"#define GLSLIFY 1\\n//\\n// Description : Array and textureless GLSL 2D/3D/4D simplex\\n//               noise functions.\\n//      Author : Ian McEwan, Ashima Arts.\\n//  Maintainer : ijm\\n//     Lastmod : 20110822 (ijm)\\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\\n//               Distributed under the MIT License. See LICENSE file.\\n//               https://github.com/ashima/webgl-noise\\n//\\n\\nvec3 mod289(vec3 x) {\\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\n\\nvec4 mod289(vec4 x) {\\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\n\\nvec4 permute(vec4 x) {\\n     return mod289(((x*34.0)+1.0)*x);\\n}\\n\\nvec4 taylorInvSqrt(vec4 r)\\n{\\n  return 1.79284291400159 - 0.85373472095314 * r;\\n}\\n\\nfloat snoise(vec3 v)\\n  {\\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\\n\\n// First corner\\n  vec3 i  = floor(v + dot(v, C.yyy) );\\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\\n\\n// Other corners\\n  vec3 g = step(x0.yzx, x0.xyz);\\n  vec3 l = 1.0 - g;\\n  vec3 i1 = min( g.xyz, l.zxy );\\n  vec3 i2 = max( g.xyz, l.zxy );\\n\\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\\n  vec3 x1 = x0 - i1 + C.xxx;\\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\\n\\n// Permutations\\n  i = mod289(i);\\n  vec4 p = permute( permute( permute(\\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\\n\\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\\n  float n_ = 0.142857142857; // 1.0/7.0\\n  vec3  ns = n_ * D.wyz - D.xzx;\\n\\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\\n\\n  vec4 x_ = floor(j * ns.z);\\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\\n\\n  vec4 x = x_ *ns.x + ns.yyyy;\\n  vec4 y = y_ *ns.x + ns.yyyy;\\n  vec4 h = 1.0 - abs(x) - abs(y);\\n\\n  vec4 b0 = vec4( x.xy, y.xy );\\n  vec4 b1 = vec4( x.zw, y.zw );\\n\\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\\n  vec4 s0 = floor(b0)*2.0 + 1.0;\\n  vec4 s1 = floor(b1)*2.0 + 1.0;\\n  vec4 sh = -step(h, vec4(0.0));\\n\\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\\n\\n  vec3 p0 = vec3(a0.xy,h.x);\\n  vec3 p1 = vec3(a0.zw,h.y);\\n  vec3 p2 = vec3(a1.xy,h.z);\\n  vec3 p3 = vec3(a1.zw,h.w);\\n\\n//Normalise gradients\\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\\n  p0 *= norm.x;\\n  p1 *= norm.y;\\n  p2 *= norm.z;\\n  p3 *= norm.w;\\n\\n// Mix final noise value\\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\\n  m = m * m;\\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\\n                                dot(p2,x2), dot(p3,x3) ) );\\n  }\\n\\nvarying vec2 vUv;\\nvarying vec3 vpos;\\nvarying float hp;\\nvarying float hp2;\\nvarying float hp3;\\n\\nuniform float iTime;\\nuniform float pSize;\\nuniform vec3 camPosition;\\n\\nfloat hash(vec3 p)// replace this by something better\\n{\\n  p  = fract(p*0.3183099+.1);\\n  p *= 17.0;\\n  return fract(p.x*p.y*p.z*(p.x+p.y+p.z));\\n}\\n\\nvoid main() {\\n  vUv = uv;\\n\\n  hp = hash(position); // Рандомный фактор для точки по позиции\\n  hp2 = hash(position*3.3); // Дополнительный рандомный фактор\\n  hp3 = hash(position*6.6); // Еще один рандомный фактор\\n\\n  float t = iTime*.5 + hp; // Замедляем время и прибавляем рандомный фактор - у этой точки будет \\\"своё\\\" время\\n\\n  vpos = position;\\n\\n  // индивидульный рандомнеый vec3 для точки для определения движения точки\\n  vec3 npp = vec3(hash(position), hash(position*10.), hash(position*20.))*2.;\\n\\n  // Фактор смещения через симплексный шум\\n  float nF = snoise((npp + vec3(iTime*.525)) * 1.) * (.25 + fract(t))*.5;\\n\\n  // Дивгаем точки\\n  vpos.y -= (vpos.y * fract(t)*2. );\\n\\n  // Добавляем фактор плавающего смещения\\n  vpos.xyz += nF*2.;\\n\\n  gl_PointSize = pSize*35. / length(camPosition - vpos);\\n\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( vpos, 1.0 );\\n}\\n\";","'use strict';\n\nvar SOUNDCLOUD_API_URL = 'https://api.soundcloud.com';\n\nvar anchor;\nvar keys = 'protocol hostname host pathname port search hash href'.split(' ');\nfunction _parseURL(url) {\n  if (!anchor) {\n    anchor = document.createElement('a');\n  }\n\n  var result = {};\n\n  anchor.href = url || '';\n\n  for (var i = 0, len = keys.length; i < len; i++) {\n    var key = keys[i];\n    result[key] = anchor[key];\n  }\n\n  return result;\n}\n\nfunction _appendQueryParam(url, param, value) {\n  var U = _parseURL(url);\n  var regex = /\\?(?:.*)$/;\n  var chr = regex.test(U.search) ? '&' : '?';\n  var result =\n    U.protocol +\n    '//' +\n    U.host +\n    U.port +\n    U.pathname +\n    U.search +\n    chr +\n    param +\n    '=' +\n    value +\n    U.hash;\n\n  return result;\n}\n\nfunction SoundCloud(clientId, apiUrl) {\n  if (!(this instanceof SoundCloud)) {\n    return new SoundCloud(clientId, apiUrl);\n  }\n\n  if (!clientId && !apiUrl) {\n    console.info('SoundCloud API requires clientId or custom apiUrl');\n  }\n\n  this._events = {};\n\n  this._clientId = clientId;\n  this._baseUrl = apiUrl || SOUNDCLOUD_API_URL;\n\n  this.playing = false;\n  this.duration = 0;\n\n  this.audio = document.createElement('audio');\n}\n\nSoundCloud.prototype.resolve = function(url, callback) {\n  var resolveUrl =\n    this._baseUrl + '/resolve.json?url=' + encodeURIComponent(url);\n\n  if (this._clientId) {\n    resolveUrl = _appendQueryParam(resolveUrl, 'client_id', this._clientId);\n  }\n\n  this._json(\n    resolveUrl,\n    function(data) {\n      this.cleanData();\n\n      if (Array.isArray(data)) {\n        data = { tracks: data };\n      }\n\n      if (data.tracks) {\n        data.tracks = data.tracks.map(this._transformTrack.bind(this));\n        this._playlist = data;\n      } else {\n        this._track = this._transformTrack(data);\n\n        // save timings\n        var U = _parseURL(url);\n        this._track.stream_url += U.hash;\n      }\n\n      this.duration =\n        data.duration && !isNaN(data.duration)\n          ? data.duration / 1000 // convert to seconds\n          : 0; // no duration is zero\n\n      callback(data);\n    }.bind(this)\n  );\n};\n\n// deprecated\nSoundCloud.prototype._jsonp = function(url, callback) {\n  var target = document.getElementsByTagName('script')[0] || document.head;\n  var script = document.createElement('script');\n  var id =\n    'jsonp_callback_' + new Date().valueOf() + Math.floor(Math.random() * 1000);\n\n  window[id] = function(data) {\n    if (script.parentNode) {\n      script.parentNode.removeChild(script);\n    }\n    window[id] = function() {};\n    callback(data);\n  };\n\n  script.src = _appendQueryParam(url, 'callback', id);\n  target.parentNode.insertBefore(script, target);\n};\n\nSoundCloud.prototype._json = function(url, callback) {\n  var xhr = new XMLHttpRequest();\n\n  xhr.open('GET', url);\n  xhr.onreadystatechange = function() {\n    if (xhr.readyState === 4) {\n      if (xhr.status === 200) {\n        var resp = {};\n        try {\n          resp = JSON.parse(xhr.responseText);\n        } catch (err) {\n          // fail silently\n        }\n        callback(resp);\n      }\n    }\n  };\n\n  xhr.send(null);\n};\n\nSoundCloud.prototype._transformTrack = function(track) {\n  if (this._baseUrl !== SOUNDCLOUD_API_URL) {\n    track.original_stream_url = track.stream_url;\n    track.stream_url = track.stream_url.replace(\n      SOUNDCLOUD_API_URL,\n      this._baseUrl\n    );\n  }\n\n  return track;\n};\n\nSoundCloud.prototype.on = function(e, fn) {\n  this._events[e] = fn;\n  this.audio.addEventListener(e, fn, false);\n};\n\nSoundCloud.prototype.off = function(e, fn) {\n  this._events[e] = null;\n  this.audio.removeEventListener(e, fn);\n};\n\nSoundCloud.prototype.unbindAll = function() {\n  for (var e in this._events) {\n    var fn = this._events[e];\n    if (fn) {\n      this.off(e, fn);\n    }\n  }\n};\n\nSoundCloud.prototype.preload = function(streamUrl, preloadType) {\n  this._track = { stream_url: streamUrl };\n\n  if (preloadType) {\n    this.audio.preload = preloadType;\n  }\n\n  this.audio.src = this._clientId\n    ? _appendQueryParam(streamUrl, 'client_id', this._clientId)\n    : streamUrl;\n};\n\nSoundCloud.prototype.play = function(options) {\n  options = options || {};\n  var src;\n\n  if (options.streamUrl) {\n    src = options.streamUrl;\n  } else if (this._playlist) {\n    var length = this._playlist.tracks.length;\n\n    if (length) {\n      if (options.playlistIndex === undefined) {\n        this._playlistIndex = this._playlistIndex || 0;\n      } else {\n        this._playlistIndex = options.playlistIndex;\n      }\n\n      // be silent if index is out of range\n      if (this._playlistIndex >= length || this._playlistIndex < 0) {\n        this._playlistIndex = 0;\n        return;\n      }\n\n      src = this._playlist.tracks[this._playlistIndex].stream_url;\n    }\n  } else if (this._track) {\n    src = this._track.stream_url;\n  }\n\n  if (!src) {\n    throw new Error(\n      'There is no tracks to play, use `streamUrl` option or `load` method'\n    );\n  }\n\n  if (this._clientId) {\n    src = _appendQueryParam(src, 'client_id', this._clientId);\n  }\n\n  if (src !== this.audio.src) {\n    this.audio.src = src;\n  }\n\n  this.playing = src;\n\n  return this.audio.play();\n};\n\nSoundCloud.prototype.pause = function() {\n  this.audio.pause();\n  this.playing = false;\n};\n\nSoundCloud.prototype.stop = function() {\n  this.audio.pause();\n  this.audio.currentTime = 0;\n  this.playing = false;\n};\n\nSoundCloud.prototype.next = function(options) {\n  options = options || {};\n  var tracksLength = this._playlist.tracks.length;\n\n  if (this._playlistIndex >= tracksLength - 1) {\n    if (options.loop) {\n      this._playlistIndex = -1;\n    } else {\n      return;\n    }\n  }\n\n  if (this._playlist && tracksLength) {\n    return this.play({ playlistIndex: ++this._playlistIndex });\n  }\n};\n\nSoundCloud.prototype.previous = function() {\n  if (this._playlistIndex <= 0) {\n    return;\n  }\n\n  if (this._playlist && this._playlist.tracks.length) {\n    return this.play({ playlistIndex: --this._playlistIndex });\n  }\n};\n\nSoundCloud.prototype.seek = function(e) {\n  if (!this.audio.readyState) {\n    return false;\n  }\n\n  var percent =\n    e.offsetX / e.target.offsetWidth ||\n    (e.layerX - e.target.offsetLeft) / e.target.offsetWidth;\n\n  this.audio.currentTime = percent * (this.audio.duration || 0);\n};\n\nSoundCloud.prototype.cleanData = function() {\n  this._track = void 0;\n  this._playlist = void 0;\n};\n\nSoundCloud.prototype.setVolume = function(volumePercentage) {\n  if (!this.audio.readyState) {\n    return;\n  }\n\n  this.audio.volume = volumePercentage;\n};\n\nSoundCloud.prototype.setTime = function(seconds) {\n  if (!this.audio.readyState) {\n    return;\n  }\n\n  this.audio.currentTime = seconds;\n};\n\nmodule.exports = SoundCloud;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar clamp = function (min, max) { return function (v) {\r\n    return Math.max(Math.min(v, max), min);\r\n}; };\r\nvar sanitize = function (v) { return (v % 1 ? Number(v.toFixed(5)) : v); };\r\nvar floatRegex = /(-)?(\\d[\\d\\.]*)/g;\r\nvar colorRegex = /(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[\\d\\.]+%?\\))/gi;\r\nvar singleColorRegex = /^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[\\d\\.]+%?\\))$/i;\n\nvar number = {\r\n    test: function (v) { return typeof v === 'number'; },\r\n    parse: parseFloat,\r\n    transform: function (v) { return v; }\r\n};\r\nvar alpha = __assign(__assign({}, number), { transform: clamp(0, 1) });\r\nvar scale = __assign(__assign({}, number), { default: 1 });\n\nvar createUnitType = function (unit) { return ({\r\n    test: function (v) {\r\n        return typeof v === 'string' && v.endsWith(unit) && v.split(' ').length === 1;\r\n    },\r\n    parse: parseFloat,\r\n    transform: function (v) { return \"\" + v + unit; }\r\n}); };\r\nvar degrees = createUnitType('deg');\r\nvar percent = createUnitType('%');\r\nvar px = createUnitType('px');\r\nvar vh = createUnitType('vh');\r\nvar vw = createUnitType('vw');\r\nvar progressPercentage = __assign(__assign({}, percent), { parse: function (v) { return percent.parse(v) / 100; }, transform: function (v) { return percent.transform(v * 100); } });\n\nvar getValueFromFunctionString = function (value) {\r\n    return value.substring(value.indexOf('(') + 1, value.lastIndexOf(')'));\r\n};\r\nvar clampRgbUnit = clamp(0, 255);\r\nvar isRgba = function (v) { return v.red !== undefined; };\r\nvar isHsla = function (v) { return v.hue !== undefined; };\r\nvar splitColorValues = function (terms) {\r\n    return function (v) {\r\n        if (typeof v !== 'string')\r\n            return v;\r\n        var values = {};\r\n        var valuesArray = getValueFromFunctionString(v).split(/,\\s*/);\r\n        for (var i = 0; i < 4; i++) {\r\n            values[terms[i]] =\r\n                valuesArray[i] !== undefined ? parseFloat(valuesArray[i]) : 1;\r\n        }\r\n        return values;\r\n    };\r\n};\r\nvar rgbaTemplate = function (_a) {\r\n    var red = _a.red, green = _a.green, blue = _a.blue, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n    return \"rgba(\" + red + \", \" + green + \", \" + blue + \", \" + alpha$$1 + \")\";\r\n};\r\nvar hslaTemplate = function (_a) {\r\n    var hue = _a.hue, saturation = _a.saturation, lightness = _a.lightness, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n    return \"hsla(\" + hue + \", \" + saturation + \", \" + lightness + \", \" + alpha$$1 + \")\";\r\n};\r\nvar rgbUnit = __assign(__assign({}, number), { transform: function (v) { return Math.round(clampRgbUnit(v)); } });\r\nfunction isColorString(color, colorType) {\r\n    return color.startsWith(colorType) && singleColorRegex.test(color);\r\n}\r\nvar rgba = {\r\n    test: function (v) { return (typeof v === 'string' ? isColorString(v, 'rgb') : isRgba(v)); },\r\n    parse: splitColorValues(['red', 'green', 'blue', 'alpha']),\r\n    transform: function (_a) {\r\n        var red = _a.red, green = _a.green, blue = _a.blue, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n        return rgbaTemplate({\r\n            red: rgbUnit.transform(red),\r\n            green: rgbUnit.transform(green),\r\n            blue: rgbUnit.transform(blue),\r\n            alpha: sanitize(alpha.transform(alpha$$1))\r\n        });\r\n    }\r\n};\r\nvar hsla = {\r\n    test: function (v) { return (typeof v === 'string' ? isColorString(v, 'hsl') : isHsla(v)); },\r\n    parse: splitColorValues(['hue', 'saturation', 'lightness', 'alpha']),\r\n    transform: function (_a) {\r\n        var hue = _a.hue, saturation = _a.saturation, lightness = _a.lightness, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n        return hslaTemplate({\r\n            hue: Math.round(hue),\r\n            saturation: percent.transform(sanitize(saturation)),\r\n            lightness: percent.transform(sanitize(lightness)),\r\n            alpha: sanitize(alpha.transform(alpha$$1))\r\n        });\r\n    }\r\n};\r\nvar hex = __assign(__assign({}, rgba), { test: function (v) { return typeof v === 'string' && isColorString(v, '#'); }, parse: function (v) {\r\n        var r = '';\r\n        var g = '';\r\n        var b = '';\r\n        if (v.length > 4) {\r\n            r = v.substr(1, 2);\r\n            g = v.substr(3, 2);\r\n            b = v.substr(5, 2);\r\n        }\r\n        else {\r\n            r = v.substr(1, 1);\r\n            g = v.substr(2, 1);\r\n            b = v.substr(3, 1);\r\n            r += r;\r\n            g += g;\r\n            b += b;\r\n        }\r\n        return {\r\n            red: parseInt(r, 16),\r\n            green: parseInt(g, 16),\r\n            blue: parseInt(b, 16),\r\n            alpha: 1\r\n        };\r\n    } });\r\nvar color = {\r\n    test: function (v) {\r\n        return (typeof v === 'string' && singleColorRegex.test(v)) ||\r\n            isRgba(v) ||\r\n            isHsla(v);\r\n    },\r\n    parse: function (v) {\r\n        if (rgba.test(v)) {\r\n            return rgba.parse(v);\r\n        }\r\n        else if (hsla.test(v)) {\r\n            return hsla.parse(v);\r\n        }\r\n        else if (hex.test(v)) {\r\n            return hex.parse(v);\r\n        }\r\n        return v;\r\n    },\r\n    transform: function (v) {\r\n        if (isRgba(v)) {\r\n            return rgba.transform(v);\r\n        }\r\n        else if (isHsla(v)) {\r\n            return hsla.transform(v);\r\n        }\r\n        return v;\r\n    }\r\n};\n\nvar COLOR_TOKEN = '${c}';\r\nvar NUMBER_TOKEN = '${n}';\r\nvar convertNumbersToZero = function (v) {\r\n    return typeof v === 'number' ? 0 : v;\r\n};\r\nvar complex = {\r\n    test: function (v) {\r\n        if (typeof v !== 'string' || !isNaN(v))\r\n            return false;\r\n        var numValues = 0;\r\n        var foundNumbers = v.match(floatRegex);\r\n        var foundColors = v.match(colorRegex);\r\n        if (foundNumbers)\r\n            numValues += foundNumbers.length;\r\n        if (foundColors)\r\n            numValues += foundColors.length;\r\n        return numValues > 0;\r\n    },\r\n    parse: function (v) {\r\n        var input = v;\r\n        var parsed = [];\r\n        var foundColors = input.match(colorRegex);\r\n        if (foundColors) {\r\n            input = input.replace(colorRegex, COLOR_TOKEN);\r\n            parsed.push.apply(parsed, foundColors.map(color.parse));\r\n        }\r\n        var foundNumbers = input.match(floatRegex);\r\n        if (foundNumbers) {\r\n            parsed.push.apply(parsed, foundNumbers.map(number.parse));\r\n        }\r\n        return parsed;\r\n    },\r\n    createTransformer: function (prop) {\r\n        var template = prop;\r\n        var token = 0;\r\n        var foundColors = prop.match(colorRegex);\r\n        var numColors = foundColors ? foundColors.length : 0;\r\n        if (foundColors) {\r\n            for (var i = 0; i < numColors; i++) {\r\n                template = template.replace(foundColors[i], COLOR_TOKEN);\r\n                token++;\r\n            }\r\n        }\r\n        var foundNumbers = template.match(floatRegex);\r\n        var numNumbers = foundNumbers ? foundNumbers.length : 0;\r\n        if (foundNumbers) {\r\n            for (var i = 0; i < numNumbers; i++) {\r\n                template = template.replace(foundNumbers[i], NUMBER_TOKEN);\r\n                token++;\r\n            }\r\n        }\r\n        return function (v) {\r\n            var output = template;\r\n            for (var i = 0; i < token; i++) {\r\n                output = output.replace(i < numColors ? COLOR_TOKEN : NUMBER_TOKEN, i < numColors ? color.transform(v[i]) : sanitize(v[i]));\r\n            }\r\n            return output;\r\n        };\r\n    },\r\n    getAnimatableNone: function (target) {\r\n        var parsedTarget = complex.parse(target);\r\n        var targetTransformer = complex.createTransformer(target);\r\n        return targetTransformer(parsedTarget.map(convertNumbersToZero));\r\n    }\r\n};\n\nexport { number, scale, alpha, degrees, percent, progressPercentage, px, vw, vh, rgba, rgbUnit, hsla, hex, color, complex };\n","import { invariant } from 'hey-listen';\n\nvar prevTime = 0;\r\nvar onNextFrame = typeof window !== 'undefined' && window.requestAnimationFrame !== undefined\r\n    ? function (callback) { return window.requestAnimationFrame(callback); }\r\n    : function (callback) {\r\n        var timestamp = Date.now();\r\n        var timeToCall = Math.max(0, 16.7 - (timestamp - prevTime));\r\n        prevTime = timestamp + timeToCall;\r\n        setTimeout(function () { return callback(prevTime); }, timeToCall);\r\n    };\n\nvar createStep = (function (setRunNextFrame) {\r\n    var processToRun = [];\r\n    var processToRunNextFrame = [];\r\n    var numThisFrame = 0;\r\n    var isProcessing = false;\r\n    var i = 0;\r\n    var cancelled = new WeakSet();\r\n    var toKeepAlive = new WeakSet();\r\n    var renderStep = {\r\n        cancel: function (process) {\r\n            var indexOfCallback = processToRunNextFrame.indexOf(process);\r\n            cancelled.add(process);\r\n            if (indexOfCallback !== -1) {\r\n                processToRunNextFrame.splice(indexOfCallback, 1);\r\n            }\r\n        },\r\n        process: function (frame) {\r\n            var _a;\r\n            isProcessing = true;\r\n            _a = [\r\n                processToRunNextFrame,\r\n                processToRun\r\n            ], processToRun = _a[0], processToRunNextFrame = _a[1];\r\n            processToRunNextFrame.length = 0;\r\n            numThisFrame = processToRun.length;\r\n            if (numThisFrame) {\r\n                var process_1;\r\n                for (i = 0; i < numThisFrame; i++) {\r\n                    process_1 = processToRun[i];\r\n                    process_1(frame);\r\n                    if (toKeepAlive.has(process_1) === true && !cancelled.has(process_1)) {\r\n                        renderStep.schedule(process_1);\r\n                        setRunNextFrame(true);\r\n                    }\r\n                }\r\n            }\r\n            isProcessing = false;\r\n        },\r\n        schedule: function (process, keepAlive, immediate) {\r\n            if (keepAlive === void 0) { keepAlive = false; }\r\n            if (immediate === void 0) { immediate = false; }\r\n            invariant(typeof process === 'function', 'Argument must be a function');\r\n            var addToCurrentBuffer = immediate && isProcessing;\r\n            var buffer = addToCurrentBuffer ? processToRun : processToRunNextFrame;\r\n            cancelled.delete(process);\r\n            if (keepAlive)\r\n                toKeepAlive.add(process);\r\n            if (buffer.indexOf(process) === -1) {\r\n                buffer.push(process);\r\n                if (addToCurrentBuffer)\r\n                    numThisFrame = processToRun.length;\r\n            }\r\n        }\r\n    };\r\n    return renderStep;\r\n});\n\nvar StepId;\r\n(function (StepId) {\r\n    StepId[\"Read\"] = \"read\";\r\n    StepId[\"Update\"] = \"update\";\r\n    StepId[\"Render\"] = \"render\";\r\n    StepId[\"PostRender\"] = \"postRender\";\r\n    StepId[\"FixedUpdate\"] = \"fixedUpdate\";\r\n})(StepId || (StepId = {}));\n\nvar maxElapsed = 40;\r\nvar defaultElapsed = (1 / 60) * 1000;\r\nvar useDefaultElapsed = true;\r\nvar willRunNextFrame = false;\r\nvar isProcessing = false;\r\nvar frame = {\r\n    delta: 0,\r\n    timestamp: 0\r\n};\r\nvar stepsOrder = [\r\n    StepId.Read,\r\n    StepId.Update,\r\n    StepId.Render,\r\n    StepId.PostRender\r\n];\r\nvar setWillRunNextFrame = function (willRun) { return (willRunNextFrame = willRun); };\r\nvar _a = stepsOrder.reduce(function (acc, key) {\r\n    var step = createStep(setWillRunNextFrame);\r\n    acc.sync[key] = function (process, keepAlive, immediate) {\r\n        if (keepAlive === void 0) { keepAlive = false; }\r\n        if (immediate === void 0) { immediate = false; }\r\n        if (!willRunNextFrame)\r\n            startLoop();\r\n        step.schedule(process, keepAlive, immediate);\r\n        return process;\r\n    };\r\n    acc.cancelSync[key] = function (process) { return step.cancel(process); };\r\n    acc.steps[key] = step;\r\n    return acc;\r\n}, {\r\n    steps: {},\r\n    sync: {},\r\n    cancelSync: {}\r\n}), steps = _a.steps, sync = _a.sync, cancelSync = _a.cancelSync;\r\nvar processStep = function (stepId) { return steps[stepId].process(frame); };\r\nvar processFrame = function (timestamp) {\r\n    willRunNextFrame = false;\r\n    frame.delta = useDefaultElapsed\r\n        ? defaultElapsed\r\n        : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\r\n    if (!useDefaultElapsed)\r\n        defaultElapsed = frame.delta;\r\n    frame.timestamp = timestamp;\r\n    isProcessing = true;\r\n    stepsOrder.forEach(processStep);\r\n    isProcessing = false;\r\n    if (willRunNextFrame) {\r\n        useDefaultElapsed = false;\r\n        onNextFrame(processFrame);\r\n    }\r\n};\r\nvar startLoop = function () {\r\n    willRunNextFrame = true;\r\n    useDefaultElapsed = true;\r\n    if (!isProcessing)\r\n        onNextFrame(processFrame);\r\n};\r\nvar getFrameData = function () { return frame; };\n\nexport default sync;\nexport { cancelSync, getFrameData };\n","import { hsla, rgba, hex, color, complex } from 'style-value-types';\nimport { invariant } from 'hey-listen';\nimport { getFrameData } from 'framesync';\nimport { createAnticipateEasing, createBackIn, createExpoIn, cubicBezier, linear, easeIn, easeOut, easeInOut, circIn, circOut, circInOut, backIn, backOut, backInOut, anticipate, reversed, mirrored } from '@popmotion/easing';\nexport { createAnticipateEasing, createBackIn, createExpoIn, cubicBezier, linear, easeIn, easeOut, easeInOut, circIn, circOut, circInOut, backIn, backOut, backInOut, anticipate, reversed, mirrored } from '@popmotion/easing';\n\nvar zeroPoint = {\r\n    x: 0,\r\n    y: 0,\r\n    z: 0\r\n};\r\nvar isNum = function (v) { return typeof v === 'number'; };\n\nvar radiansToDegrees = (function (radians) { return (radians * 180) / Math.PI; });\n\nvar angle = (function (a, b) {\r\n    if (b === void 0) { b = zeroPoint; }\r\n    return radiansToDegrees(Math.atan2(b.y - a.y, b.x - a.x));\r\n});\n\nvar applyOffset = (function (from, to) {\r\n    var hasReceivedFrom = true;\r\n    if (to === undefined) {\r\n        to = from;\r\n        hasReceivedFrom = false;\r\n    }\r\n    return function (v) {\r\n        if (hasReceivedFrom) {\r\n            return v - from + to;\r\n        }\r\n        else {\r\n            from = v;\r\n            hasReceivedFrom = true;\r\n            return to;\r\n        }\r\n    };\r\n});\n\nvar curryRange = (function (func) { return function (min, max, v) { return (v !== undefined ? func(min, max, v) : function (cv) { return func(min, max, cv); }); }; });\n\nvar clamp = function (min, max, v) {\r\n    return Math.min(Math.max(v, min), max);\r\n};\r\nvar clamp$1 = curryRange(clamp);\n\nvar conditional = (function (check, apply) { return function (v) {\r\n    return check(v) ? apply(v) : v;\r\n}; });\n\nvar degreesToRadians = (function (degrees) { return (degrees * Math.PI) / 180; });\n\nvar isPoint = (function (point) {\r\n    return point.hasOwnProperty('x') && point.hasOwnProperty('y');\r\n});\n\nvar isPoint3D = (function (point) {\r\n    return isPoint(point) && point.hasOwnProperty('z');\r\n});\n\nvar distance1D = function (a, b) { return Math.abs(a - b); };\r\nvar distance = (function (a, b) {\r\n    if (b === void 0) { b = zeroPoint; }\r\n    if (isNum(a) && isNum(b)) {\r\n        return distance1D(a, b);\r\n    }\r\n    else if (isPoint(a) && isPoint(b)) {\r\n        var xDelta = distance1D(a.x, b.x);\r\n        var yDelta = distance1D(a.y, b.y);\r\n        var zDelta = isPoint3D(a) && isPoint3D(b) ? distance1D(a.z, b.z) : 0;\r\n        return Math.sqrt(Math.pow(xDelta, 2) + Math.pow(yDelta, 2) + Math.pow(zDelta, 2));\r\n    }\r\n    return 0;\r\n});\n\nvar progress = (function (from, to, value) {\r\n    var toFromDifference = to - from;\r\n    return toFromDifference === 0 ? 1 : (value - from) / toFromDifference;\r\n});\n\nvar mix = (function (from, to, progress) {\r\n    return -progress * from + progress * to + from;\r\n});\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar mixLinearColor = function (from, to, v) {\r\n    var fromExpo = from * from;\r\n    var toExpo = to * to;\r\n    return Math.sqrt(Math.max(0, v * (toExpo - fromExpo) + fromExpo));\r\n};\r\nvar colorTypes = [hex, rgba, hsla];\r\nvar getColorType = function (v) {\r\n    return colorTypes.find(function (type) { return type.test(v); });\r\n};\r\nvar notAnimatable = function (color$$1) {\r\n    return \"'\" + color$$1 + \"' is not an animatable color. Use the equivalent color code instead.\";\r\n};\r\nvar mixColor = (function (from, to) {\r\n    var fromColorType = getColorType(from);\r\n    var toColorType = getColorType(to);\r\n    invariant(!!fromColorType, notAnimatable(from));\r\n    invariant(!!toColorType, notAnimatable(to));\r\n    invariant(fromColorType.transform === toColorType.transform, 'Both colors must be hex/RGBA, OR both must be HSLA.');\r\n    var fromColor = fromColorType.parse(from);\r\n    var toColor = toColorType.parse(to);\r\n    var blended = __assign({}, fromColor);\r\n    var mixFunc = fromColorType === hsla ? mix : mixLinearColor;\r\n    return function (v) {\r\n        for (var key in blended) {\r\n            if (key !== 'alpha') {\r\n                blended[key] = mixFunc(fromColor[key], toColor[key], v);\r\n            }\r\n        }\r\n        blended.alpha = mix(fromColor.alpha, toColor.alpha, v);\r\n        return fromColorType.transform(blended);\r\n    };\r\n});\n\nvar combineFunctions = function (a, b) { return function (v) { return b(a(v)); }; };\r\nvar pipe = (function () {\r\n    var transformers = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        transformers[_i] = arguments[_i];\r\n    }\r\n    return transformers.reduce(combineFunctions);\r\n});\n\nfunction getMixer(origin, target) {\r\n    if (isNum(origin)) {\r\n        return function (v) { return mix(origin, target, v); };\r\n    }\r\n    else if (color.test(origin)) {\r\n        return mixColor(origin, target);\r\n    }\r\n    else {\r\n        return mixComplex(origin, target);\r\n    }\r\n}\r\nvar mixArray = function (from, to) {\r\n    var output = from.slice();\r\n    var numValues = output.length;\r\n    var blendValue = from.map(function (fromThis, i) { return getMixer(fromThis, to[i]); });\r\n    return function (v) {\r\n        for (var i = 0; i < numValues; i++) {\r\n            output[i] = blendValue[i](v);\r\n        }\r\n        return output;\r\n    };\r\n};\r\nvar mixObject = function (origin, target) {\r\n    var output = __assign({}, origin, target);\r\n    var blendValue = {};\r\n    for (var key in output) {\r\n        if (origin[key] !== undefined && target[key] !== undefined) {\r\n            blendValue[key] = getMixer(origin[key], target[key]);\r\n        }\r\n    }\r\n    return function (v) {\r\n        for (var key in blendValue) {\r\n            output[key] = blendValue[key](v);\r\n        }\r\n        return output;\r\n    };\r\n};\r\nfunction analyse(value) {\r\n    var parsed = complex.parse(value);\r\n    var numValues = parsed.length;\r\n    var numNumbers = 0;\r\n    var numRGB = 0;\r\n    var numHSL = 0;\r\n    for (var i = 0; i < numValues; i++) {\r\n        if (numNumbers || typeof parsed[i] === 'number') {\r\n            numNumbers++;\r\n        }\r\n        else {\r\n            if (parsed[i].hue !== undefined) {\r\n                numHSL++;\r\n            }\r\n            else {\r\n                numRGB++;\r\n            }\r\n        }\r\n    }\r\n    return { parsed: parsed, numNumbers: numNumbers, numRGB: numRGB, numHSL: numHSL };\r\n}\r\nvar mixComplex = function (origin, target) {\r\n    var template = complex.createTransformer(target);\r\n    var originStats = analyse(origin);\r\n    var targetStats = analyse(target);\r\n    invariant(originStats.numHSL === targetStats.numHSL &&\r\n        originStats.numRGB === targetStats.numRGB &&\r\n        originStats.numNumbers >= targetStats.numNumbers, \"Complex values '\" + origin + \"' and '\" + target + \"' too different to mix. Ensure all colors are of the same type.\");\r\n    return pipe(mixArray(originStats.parsed, targetStats.parsed), template);\r\n};\n\nvar mixNumber = function (from, to) { return function (p) { return mix(from, to, p); }; };\r\nfunction detectMixerFactory(v) {\r\n    if (typeof v === 'number') {\r\n        return mixNumber;\r\n    }\r\n    else if (typeof v === 'string') {\r\n        if (color.test(v)) {\r\n            return mixColor;\r\n        }\r\n        else {\r\n            return mixComplex;\r\n        }\r\n    }\r\n    else if (Array.isArray(v)) {\r\n        return mixArray;\r\n    }\r\n    else if (typeof v === 'object') {\r\n        return mixObject;\r\n    }\r\n}\r\nfunction createMixers(output, ease, customMixer) {\r\n    var mixers = [];\r\n    var mixerFactory = customMixer || detectMixerFactory(output[0]);\r\n    var numMixers = output.length - 1;\r\n    for (var i = 0; i < numMixers; i++) {\r\n        var mixer = mixerFactory(output[i], output[i + 1]);\r\n        if (ease) {\r\n            var easingFunction = Array.isArray(ease) ? ease[i] : ease;\r\n            mixer = pipe(easingFunction, mixer);\r\n        }\r\n        mixers.push(mixer);\r\n    }\r\n    return mixers;\r\n}\r\nfunction fastInterpolate(_a, _b) {\r\n    var from = _a[0], to = _a[1];\r\n    var mixer = _b[0];\r\n    return function (v) { return mixer(progress(from, to, v)); };\r\n}\r\nfunction slowInterpolate(input, mixers) {\r\n    var inputLength = input.length;\r\n    var lastInputIndex = inputLength - 1;\r\n    return function (v) {\r\n        var mixerIndex = 0;\r\n        var foundMixerIndex = false;\r\n        if (v <= input[0]) {\r\n            foundMixerIndex = true;\r\n        }\r\n        else if (v >= input[lastInputIndex]) {\r\n            mixerIndex = lastInputIndex - 1;\r\n            foundMixerIndex = true;\r\n        }\r\n        if (!foundMixerIndex) {\r\n            var i = 1;\r\n            for (; i < inputLength; i++) {\r\n                if (input[i] > v || i === lastInputIndex) {\r\n                    break;\r\n                }\r\n            }\r\n            mixerIndex = i - 1;\r\n        }\r\n        var progressInRange = progress(input[mixerIndex], input[mixerIndex + 1], v);\r\n        return mixers[mixerIndex](progressInRange);\r\n    };\r\n}\r\nfunction interpolate(input, output, _a) {\r\n    var _b = _a === void 0 ? {} : _a, _c = _b.clamp, clamp = _c === void 0 ? true : _c, ease = _b.ease, mixer = _b.mixer;\r\n    var inputLength = input.length;\r\n    invariant(inputLength === output.length, 'Both input and output ranges must be the same length');\r\n    invariant(!ease || !Array.isArray(ease) || ease.length === inputLength - 1, 'Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values.');\r\n    if (input[0] > input[inputLength - 1]) {\r\n        input = [].concat(input);\r\n        output = [].concat(output);\r\n        input.reverse();\r\n        output.reverse();\r\n    }\r\n    var mixers = createMixers(output, ease, mixer);\r\n    var interpolator = inputLength === 2\r\n        ? fastInterpolate(input, mixers)\r\n        : slowInterpolate(input, mixers);\r\n    return clamp\r\n        ? pipe(clamp$1(input[0], input[inputLength - 1]), interpolator)\r\n        : interpolator;\r\n}\n\nvar pointFromVector = (function (origin, angle, distance) {\r\n    angle = degreesToRadians(angle);\r\n    return {\r\n        x: distance * Math.cos(angle) + origin.x,\r\n        y: distance * Math.sin(angle) + origin.y\r\n    };\r\n});\n\nvar toDecimal = (function (num, precision) {\r\n    if (precision === void 0) { precision = 2; }\r\n    precision = Math.pow(10, precision);\r\n    return Math.round(num * precision) / precision;\r\n});\n\nvar smoothFrame = (function (prevValue, nextValue, duration, smoothing) {\r\n    if (smoothing === void 0) { smoothing = 0; }\r\n    return toDecimal(prevValue +\r\n        (duration * (nextValue - prevValue)) / Math.max(smoothing, duration));\r\n});\n\nvar smooth = (function (strength) {\r\n    if (strength === void 0) { strength = 50; }\r\n    var previousValue = 0;\r\n    var lastUpdated = 0;\r\n    return function (v) {\r\n        var currentFramestamp = getFrameData().timestamp;\r\n        var timeDelta = currentFramestamp !== lastUpdated ? currentFramestamp - lastUpdated : 0;\r\n        var newValue = timeDelta\r\n            ? smoothFrame(previousValue, v, timeDelta, strength)\r\n            : previousValue;\r\n        lastUpdated = currentFramestamp;\r\n        previousValue = newValue;\r\n        return newValue;\r\n    };\r\n});\n\nvar snap = (function (points) {\r\n    if (typeof points === 'number') {\r\n        return function (v) { return Math.round(v / points) * points; };\r\n    }\r\n    else {\r\n        var i_1 = 0;\r\n        var numPoints_1 = points.length;\r\n        return function (v) {\r\n            var lastDistance = Math.abs(points[0] - v);\r\n            for (i_1 = 1; i_1 < numPoints_1; i_1++) {\r\n                var point = points[i_1];\r\n                var distance = Math.abs(point - v);\r\n                if (distance === 0)\r\n                    return point;\r\n                if (distance > lastDistance)\r\n                    return points[i_1 - 1];\r\n                if (i_1 === numPoints_1 - 1)\r\n                    return point;\r\n                lastDistance = distance;\r\n            }\r\n        };\r\n    }\r\n});\n\nvar identity = function (v) { return v; };\r\nvar springForce = function (alterDisplacement) {\r\n    if (alterDisplacement === void 0) { alterDisplacement = identity; }\r\n    return curryRange(function (constant, origin, v) {\r\n        var displacement = origin - v;\r\n        var springModifiedDisplacement = -(0 - constant + 1) * (0 - alterDisplacement(Math.abs(displacement)));\r\n        return displacement <= 0\r\n            ? origin + springModifiedDisplacement\r\n            : origin - springModifiedDisplacement;\r\n    });\r\n};\r\nvar springForceLinear = springForce();\r\nvar springForceExpo = springForce(Math.sqrt);\n\nvar velocityPerFrame = (function (xps, frameDuration) {\r\n    return isNum(xps) ? xps / (1000 / frameDuration) : 0;\r\n});\n\nvar velocityPerSecond = (function (velocity, frameDuration) {\r\n    return frameDuration ? velocity * (1000 / frameDuration) : 0;\r\n});\n\nvar wrap = function (min, max, v) {\r\n    var rangeSize = max - min;\r\n    return ((((v - min) % rangeSize) + rangeSize) % rangeSize) + min;\r\n};\r\nvar wrap$1 = curryRange(wrap);\n\nvar clampProgress = clamp$1(0, 1);\r\nvar steps = (function (steps, direction) {\r\n    if (direction === void 0) { direction = 'end'; }\r\n    return function (progress) {\r\n        progress =\r\n            direction === 'end' ? Math.min(progress, 0.999) : Math.max(progress, 0.001);\r\n        var expanded = progress * steps;\r\n        var rounded = direction === 'end' ? Math.floor(expanded) : Math.ceil(expanded);\r\n        return clampProgress(rounded / steps);\r\n    };\r\n});\n\nexport { angle, applyOffset, clamp$1 as clamp, conditional, degreesToRadians, distance, interpolate, isPoint, isPoint3D, mix, mixArray, mixColor, mixComplex, mixObject, pipe, pointFromVector, progress, radiansToDegrees, smooth, smoothFrame, snap, springForce, springForceExpo, springForceLinear, steps, toDecimal, velocityPerFrame, velocityPerSecond, wrap$1 as wrap };\n","import { __rest, __assign } from 'tslib';\nimport sync from 'framesync';\nimport { number, color, px, degrees, scale, alpha, progressPercentage } from 'style-value-types';\nimport { invariant } from 'hey-listen';\n\nvar createStyler = function (_a) {\n    var onRead = _a.onRead,\n        onRender = _a.onRender,\n        _b = _a.uncachedValues,\n        uncachedValues = _b === void 0 ? new Set() : _b,\n        _c = _a.useCache,\n        useCache = _c === void 0 ? true : _c;\n    return function (_a) {\n        if (_a === void 0) {\n            _a = {};\n        }\n        var props = __rest(_a, []);\n        var state = {};\n        var changedValues = [];\n        var hasChanged = false;\n        function setValue(key, value) {\n            if (key.startsWith('--')) {\n                props.hasCSSVariable = true;\n            }\n            var currentValue = state[key];\n            state[key] = value;\n            if (state[key] === currentValue) return;\n            if (changedValues.indexOf(key) === -1) {\n                changedValues.push(key);\n            }\n            if (!hasChanged) {\n                hasChanged = true;\n                sync.render(styler.render);\n            }\n        }\n        var styler = {\n            get: function (key, forceRead) {\n                if (forceRead === void 0) {\n                    forceRead = false;\n                }\n                var useCached = !forceRead && useCache && !uncachedValues.has(key) && state[key] !== undefined;\n                return useCached ? state[key] : onRead(key, props);\n            },\n            set: function (values, value) {\n                if (typeof values === 'string') {\n                    setValue(values, value);\n                } else {\n                    for (var key in values) {\n                        setValue(key, values[key]);\n                    }\n                }\n                return this;\n            },\n            render: function (forceRender) {\n                if (forceRender === void 0) {\n                    forceRender = false;\n                }\n                if (hasChanged || forceRender === true) {\n                    onRender(state, props, changedValues);\n                    hasChanged = false;\n                    changedValues.length = 0;\n                }\n                return this;\n            }\n        };\n        return styler;\n    };\n};\n\nvar CAMEL_CASE_PATTERN = /([a-z])([A-Z])/g;\nvar REPLACE_TEMPLATE = '$1-$2';\nvar camelToDash = function (str) {\n    return str.replace(CAMEL_CASE_PATTERN, REPLACE_TEMPLATE).toLowerCase();\n};\n\nvar camelCache = /*#__PURE__*/new Map();\nvar dashCache = /*#__PURE__*/new Map();\nvar prefixes = ['Webkit', 'Moz', 'O', 'ms', ''];\nvar numPrefixes = prefixes.length;\nvar isBrowser = typeof document !== 'undefined';\nvar testElement;\nvar setDashPrefix = function (key, prefixed) {\n    return dashCache.set(key, camelToDash(prefixed));\n};\nvar testPrefix = function (key) {\n    testElement = testElement || document.createElement('div');\n    for (var i = 0; i < numPrefixes; i++) {\n        var prefix = prefixes[i];\n        var noPrefix = prefix === '';\n        var prefixedPropertyName = noPrefix ? key : prefix + key.charAt(0).toUpperCase() + key.slice(1);\n        if (prefixedPropertyName in testElement.style || noPrefix) {\n            if (noPrefix && key === 'clipPath' && dashCache.has(key)) {\n                return;\n            }\n            camelCache.set(key, prefixedPropertyName);\n            setDashPrefix(key, \"\" + (noPrefix ? '' : '-') + camelToDash(prefixedPropertyName));\n        }\n    }\n};\nvar setServerProperty = function (key) {\n    return setDashPrefix(key, key);\n};\nvar prefixer = function (key, asDashCase) {\n    if (asDashCase === void 0) {\n        asDashCase = false;\n    }\n    var cache = asDashCase ? dashCache : camelCache;\n    if (!cache.has(key)) {\n        isBrowser ? testPrefix(key) : setServerProperty(key);\n    }\n    return cache.get(key) || key;\n};\n\nvar axes = ['', 'X', 'Y', 'Z'];\nvar order = ['translate', 'scale', 'rotate', 'skew', 'transformPerspective'];\nvar transformProps = /*#__PURE__*/order.reduce(function (acc, key) {\n    return axes.reduce(function (axesAcc, axesKey) {\n        axesAcc.push(key + axesKey);\n        return axesAcc;\n    }, acc);\n}, ['x', 'y', 'z']);\nvar transformPropDictionary = /*#__PURE__*/transformProps.reduce(function (dict, key) {\n    dict[key] = true;\n    return dict;\n}, {});\nfunction isTransformProp(key) {\n    return transformPropDictionary[key] === true;\n}\nfunction sortTransformProps(a, b) {\n    return transformProps.indexOf(a) - transformProps.indexOf(b);\n}\nvar transformOriginProps = /*#__PURE__*/new Set(['originX', 'originY', 'originZ']);\nfunction isTransformOriginProp(key) {\n    return transformOriginProps.has(key);\n}\n\nvar int = /*#__PURE__*/__assign( /*#__PURE__*/__assign({}, number), { transform: Math.round });\nvar valueTypes = {\n    color: color,\n    backgroundColor: color,\n    outlineColor: color,\n    fill: color,\n    stroke: color,\n    borderColor: color,\n    borderTopColor: color,\n    borderRightColor: color,\n    borderBottomColor: color,\n    borderLeftColor: color,\n    borderWidth: px,\n    borderTopWidth: px,\n    borderRightWidth: px,\n    borderBottomWidth: px,\n    borderLeftWidth: px,\n    borderRadius: px,\n    radius: px,\n    borderTopLeftRadius: px,\n    borderTopRightRadius: px,\n    borderBottomRightRadius: px,\n    borderBottomLeftRadius: px,\n    width: px,\n    maxWidth: px,\n    height: px,\n    maxHeight: px,\n    size: px,\n    top: px,\n    right: px,\n    bottom: px,\n    left: px,\n    padding: px,\n    paddingTop: px,\n    paddingRight: px,\n    paddingBottom: px,\n    paddingLeft: px,\n    margin: px,\n    marginTop: px,\n    marginRight: px,\n    marginBottom: px,\n    marginLeft: px,\n    rotate: degrees,\n    rotateX: degrees,\n    rotateY: degrees,\n    rotateZ: degrees,\n    scale: scale,\n    scaleX: scale,\n    scaleY: scale,\n    scaleZ: scale,\n    skew: degrees,\n    skewX: degrees,\n    skewY: degrees,\n    distance: px,\n    translateX: px,\n    translateY: px,\n    translateZ: px,\n    x: px,\n    y: px,\n    z: px,\n    perspective: px,\n    opacity: alpha,\n    originX: progressPercentage,\n    originY: progressPercentage,\n    originZ: px,\n    zIndex: int,\n    fillOpacity: alpha,\n    strokeOpacity: alpha,\n    numOctaves: int\n};\nvar getValueType = function (key) {\n    return valueTypes[key];\n};\nvar getValueAsType = function (value, type) {\n    return type && typeof value === 'number' ? type.transform(value) : value;\n};\n\nvar SCROLL_LEFT = 'scrollLeft';\nvar SCROLL_TOP = 'scrollTop';\nvar scrollKeys = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP]);\n\nvar blacklist = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP, 'transform']);\nvar translateAlias = {\n    x: 'translateX',\n    y: 'translateY',\n    z: 'translateZ'\n};\nfunction isCustomTemplate(v) {\n    return typeof v === 'function';\n}\nfunction buildTransform(state, transform, transformKeys, transformIsDefault, enableHardwareAcceleration) {\n    var transformString = '';\n    var transformHasZ = false;\n    transformKeys.sort(sortTransformProps);\n    var numTransformKeys = transformKeys.length;\n    for (var i = 0; i < numTransformKeys; i++) {\n        var key = transformKeys[i];\n        transformString += (translateAlias[key] || key) + \"(\" + transform[key] + \") \";\n        transformHasZ = key === 'z' ? true : transformHasZ;\n    }\n    if (!transformHasZ && enableHardwareAcceleration) {\n        transformString += 'translateZ(0)';\n    } else {\n        transformString = transformString.trim();\n    }\n    if (isCustomTemplate(state.transform)) {\n        transformString = state.transform(transform, transformIsDefault ? '' : transformString);\n    } else if (transformIsDefault) {\n        transformString = 'none';\n    }\n    return transformString;\n}\nfunction buildStyleProperty(state, enableHardwareAcceleration, styles, transform, transformOrigin, transformKeys, isDashCase) {\n    if (enableHardwareAcceleration === void 0) {\n        enableHardwareAcceleration = true;\n    }\n    if (styles === void 0) {\n        styles = {};\n    }\n    if (transform === void 0) {\n        transform = {};\n    }\n    if (transformOrigin === void 0) {\n        transformOrigin = {};\n    }\n    if (transformKeys === void 0) {\n        transformKeys = [];\n    }\n    if (isDashCase === void 0) {\n        isDashCase = false;\n    }\n    var transformIsDefault = true;\n    var hasTransform = false;\n    var hasTransformOrigin = false;\n    for (var key in state) {\n        var value = state[key];\n        var valueType = getValueType(key);\n        var valueAsType = getValueAsType(value, valueType);\n        if (isTransformProp(key)) {\n            hasTransform = true;\n            transform[key] = valueAsType;\n            transformKeys.push(key);\n            if (transformIsDefault) {\n                if (valueType.default && value !== valueType.default || !valueType.default && value !== 0) {\n                    transformIsDefault = false;\n                }\n            }\n        } else if (isTransformOriginProp(key)) {\n            transformOrigin[key] = valueAsType;\n            hasTransformOrigin = true;\n        } else if (!blacklist.has(key) || !isCustomTemplate(valueAsType)) {\n            styles[prefixer(key, isDashCase)] = valueAsType;\n        }\n    }\n    if (hasTransform || typeof state.transform === 'function') {\n        styles.transform = buildTransform(state, transform, transformKeys, transformIsDefault, enableHardwareAcceleration);\n    }\n    if (hasTransformOrigin) {\n        styles.transformOrigin = (transformOrigin.originX || '50%') + \" \" + (transformOrigin.originY || '50%') + \" \" + (transformOrigin.originZ || 0);\n    }\n    return styles;\n}\nfunction createStyleBuilder(enableHardwareAcceleration, isDashCase) {\n    if (enableHardwareAcceleration === void 0) {\n        enableHardwareAcceleration = true;\n    }\n    if (isDashCase === void 0) {\n        isDashCase = true;\n    }\n    var styles = {};\n    var transform = {};\n    var transformOrigin = {};\n    var transformKeys = [];\n    return function (state) {\n        transformKeys.length = 0;\n        buildStyleProperty(state, enableHardwareAcceleration, styles, transform, transformOrigin, transformKeys, isDashCase);\n        return styles;\n    };\n}\n\nfunction onRead(key, options) {\n    var element = options.element,\n        preparseOutput = options.preparseOutput;\n    var defaultValueType = getValueType(key);\n    if (isTransformProp(key)) {\n        return defaultValueType ? defaultValueType.default || 0 : 0;\n    } else if (scrollKeys.has(key)) {\n        return element[key];\n    } else {\n        var domValue = window.getComputedStyle(element, null).getPropertyValue(prefixer(key, true)) || 0;\n        return preparseOutput && defaultValueType && defaultValueType.test(domValue) && defaultValueType.parse ? defaultValueType.parse(domValue) : domValue;\n    }\n}\nfunction onRender(state, _a, changedValues) {\n    var element = _a.element,\n        buildStyles = _a.buildStyles,\n        hasCSSVariable = _a.hasCSSVariable;\n    Object.assign(element.style, buildStyles(state));\n    if (hasCSSVariable) {\n        var numChangedValues = changedValues.length;\n        for (var i = 0; i < numChangedValues; i++) {\n            var key = changedValues[i];\n            if (key.startsWith('--')) {\n                element.style.setProperty(key, state[key]);\n            }\n        }\n    }\n    if (changedValues.indexOf(SCROLL_LEFT) !== -1) {\n        element[SCROLL_LEFT] = state[SCROLL_LEFT];\n    }\n    if (changedValues.indexOf(SCROLL_TOP) !== -1) {\n        element[SCROLL_TOP] = state[SCROLL_TOP];\n    }\n}\nvar cssStyler = /*#__PURE__*/createStyler({\n    onRead: onRead,\n    onRender: onRender,\n    uncachedValues: scrollKeys\n});\nfunction createCssStyler(element, _a) {\n    if (_a === void 0) {\n        _a = {};\n    }\n    var enableHardwareAcceleration = _a.enableHardwareAcceleration,\n        props = __rest(_a, [\"enableHardwareAcceleration\"]);\n    return cssStyler(__assign({ element: element, buildStyles: createStyleBuilder(enableHardwareAcceleration), preparseOutput: true }, props));\n}\n\nvar camelCaseAttributes = /*#__PURE__*/new Set(['baseFrequency', 'diffuseConstant', 'kernelMatrix', 'kernelUnitLength', 'keySplines', 'keyTimes', 'limitingConeAngle', 'markerHeight', 'markerWidth', 'numOctaves', 'targetX', 'targetY', 'surfaceScale', 'specularConstant', 'specularExponent', 'stdDeviation', 'tableValues']);\n\nvar defaultOrigin = 0.5;\nvar svgAttrsTemplate = function () {\n    return {\n        style: {}\n    };\n};\nvar progressToPixels = function (progress, length) {\n    return px.transform(progress * length);\n};\nvar unmeasured = { x: 0, y: 0, width: 0, height: 0 };\nfunction calcOrigin(origin, offset, size) {\n    return typeof origin === 'string' ? origin : px.transform(offset + size * origin);\n}\nfunction calculateSVGTransformOrigin(dimensions, originX, originY) {\n    return calcOrigin(originX, dimensions.x, dimensions.width) + \" \" + calcOrigin(originY, dimensions.y, dimensions.height);\n}\nfunction buildSVGAttrs(_a, dimensions, totalPathLength, cssBuilder, attrs, isDashCase) {\n    if (dimensions === void 0) {\n        dimensions = unmeasured;\n    }\n    if (cssBuilder === void 0) {\n        cssBuilder = createStyleBuilder(false, false);\n    }\n    if (attrs === void 0) {\n        attrs = svgAttrsTemplate();\n    }\n    if (isDashCase === void 0) {\n        isDashCase = true;\n    }\n    var attrX = _a.attrX,\n        attrY = _a.attrY,\n        originX = _a.originX,\n        originY = _a.originY,\n        pathLength = _a.pathLength,\n        _b = _a.pathSpacing,\n        pathSpacing = _b === void 0 ? 1 : _b,\n        _c = _a.pathOffset,\n        pathOffset = _c === void 0 ? 0 : _c,\n        state = __rest(_a, [\"attrX\", \"attrY\", \"originX\", \"originY\", \"pathLength\", \"pathSpacing\", \"pathOffset\"]);\n    var style = cssBuilder(state);\n    for (var key in style) {\n        if (key === 'transform') {\n            attrs.style.transform = style[key];\n        } else {\n            var attrKey = isDashCase && !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n            attrs[attrKey] = style[key];\n        }\n    }\n    if (originX !== undefined || originY !== undefined || style.transform) {\n        attrs.style.transformOrigin = calculateSVGTransformOrigin(dimensions, originX !== undefined ? originX : defaultOrigin, originY !== undefined ? originY : defaultOrigin);\n    }\n    if (attrX !== undefined) attrs.x = attrX;\n    if (attrY !== undefined) attrs.y = attrY;\n    if (totalPathLength !== undefined && pathLength !== undefined) {\n        attrs[isDashCase ? 'stroke-dashoffset' : 'strokeDashoffset'] = progressToPixels(-pathOffset, totalPathLength);\n        attrs[isDashCase ? 'stroke-dasharray' : 'strokeDasharray'] = progressToPixels(pathLength, totalPathLength) + \" \" + progressToPixels(pathSpacing, totalPathLength);\n    }\n    return attrs;\n}\nfunction createAttrBuilder(dimensions, totalPathLength, isDashCase) {\n    if (isDashCase === void 0) {\n        isDashCase = true;\n    }\n    var attrs = svgAttrsTemplate();\n    var cssBuilder = createStyleBuilder(false, false);\n    return function (state) {\n        return buildSVGAttrs(state, dimensions, totalPathLength, cssBuilder, attrs, isDashCase);\n    };\n}\n\nvar getDimensions = function (element) {\n    return typeof element.getBBox === 'function' ? element.getBBox() : element.getBoundingClientRect();\n};\nvar getSVGElementDimensions = function (element) {\n    try {\n        return getDimensions(element);\n    } catch (e) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n};\n\nvar isPath = function (element) {\n    return element.tagName === 'path';\n};\nvar svgStyler = /*#__PURE__*/createStyler({\n    onRead: function (key, _a) {\n        var element = _a.element;\n        key = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n        if (!isTransformProp(key)) {\n            return element.getAttribute(key);\n        } else {\n            var valueType = getValueType(key);\n            return valueType ? valueType.default || 0 : 0;\n        }\n    },\n    onRender: function (state, _a) {\n        var element = _a.element,\n            buildAttrs = _a.buildAttrs;\n        var attrs = buildAttrs(state);\n        for (var key in attrs) {\n            if (key === 'style') {\n                Object.assign(element.style, attrs.style);\n            } else {\n                element.setAttribute(key, attrs[key]);\n            }\n        }\n    }\n});\nvar svg = function (element) {\n    var dimensions = getSVGElementDimensions(element);\n    var pathLength = isPath(element) && element.getTotalLength ? element.getTotalLength() : undefined;\n    return svgStyler({\n        element: element,\n        buildAttrs: createAttrBuilder(dimensions, pathLength)\n    });\n};\n\nvar viewport = /*#__PURE__*/createStyler({\n    useCache: false,\n    onRead: function (key) {\n        return key === 'scrollTop' ? window.pageYOffset : window.pageXOffset;\n    },\n    onRender: function (_a) {\n        var _b = _a.scrollTop,\n            scrollTop = _b === void 0 ? 0 : _b,\n            _c = _a.scrollLeft,\n            scrollLeft = _c === void 0 ? 0 : _c;\n        return window.scrollTo(scrollLeft, scrollTop);\n    }\n});\n\nvar cache = /*#__PURE__*/new WeakMap();\nvar isHTMLElement = function (node) {\n    return node instanceof HTMLElement || typeof node.click === 'function';\n};\nvar isSVGElement = function (node) {\n    return node instanceof SVGElement || 'ownerSVGElement' in node;\n};\nvar createDOMStyler = function (node, props) {\n    var styler;\n    if (node === window) {\n        styler = viewport(node);\n    } else if (isHTMLElement(node)) {\n        styler = createCssStyler(node, props);\n    } else if (isSVGElement(node)) {\n        styler = svg(node);\n    }\n    invariant(styler !== undefined, 'No valid node provided. Node must be HTMLElement, SVGElement or window.');\n    cache.set(node, styler);\n    return styler;\n};\nvar getStyler = function (node, props) {\n    return cache.has(node) ? cache.get(node) : createDOMStyler(node, props);\n};\nfunction index(nodeOrSelector, props) {\n    var node = typeof nodeOrSelector === 'string' ? document.querySelector(nodeOrSelector) : nodeOrSelector;\n    return getStyler(node, props);\n}\n\nexport default index;\nexport { buildSVGAttrs, buildStyleProperty, createStyler as createStylerFactory, isTransformProp, transformProps };\n","import { __rest, __extends, __assign } from 'tslib';\nimport { pipe, angle, degreesToRadians, distance, isPoint3D, isPoint, mix, pointFromVector, progress, radiansToDegrees, smoothFrame, velocityPerFrame, velocityPerSecond, mixColor, mixComplex, clamp, applyOffset, conditional, interpolate, mixArray, smooth, snap, springForce, springForceExpo, springForceLinear, wrap } from '@popmotion/popcorn';\nimport sync, { getFrameData, cancelSync } from 'framesync';\nimport * as styleValueTypes from 'style-value-types';\nimport { color, complex, percent, degrees, vh, vw, px, number } from 'style-value-types';\nexport { styleValueTypes as valueTypes };\nimport * as easing from '@popmotion/easing';\nimport { linear, createReversedEasing, easeOut, easeInOut } from '@popmotion/easing';\nexport { easing };\nimport styler from 'stylefire';\nexport { default as styler } from 'stylefire';\nimport { warning } from 'hey-listen';\n\nvar Chainable = /*#__PURE__*/function () {\n    function Chainable(props) {\n        if (props === void 0) {\n            props = {};\n        }\n        this.props = props;\n    }\n    Chainable.prototype.applyMiddleware = function (middleware) {\n        return this.create(__assign({}, this.props, { middleware: this.props.middleware ? [middleware].concat(this.props.middleware) : [middleware] }));\n    };\n    Chainable.prototype.pipe = function () {\n        var funcs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            funcs[_i] = arguments[_i];\n        }\n        var pipedUpdate = funcs.length === 1 ? funcs[0] : pipe.apply(void 0, funcs);\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return update(pipedUpdate(v));\n            };\n        });\n    };\n    Chainable.prototype.while = function (predicate) {\n        return this.applyMiddleware(function (update, complete) {\n            return function (v) {\n                return predicate(v) ? update(v) : complete();\n            };\n        });\n    };\n    Chainable.prototype.filter = function (predicate) {\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return predicate(v) && update(v);\n            };\n        });\n    };\n    return Chainable;\n}();\n\nvar Observer = /*#__PURE__*/function () {\n    function Observer(_a, observer) {\n        var middleware = _a.middleware,\n            onComplete = _a.onComplete;\n        var _this = this;\n        this.isActive = true;\n        this.update = function (v) {\n            if (_this.observer.update) _this.updateObserver(v);\n        };\n        this.complete = function () {\n            if (_this.observer.complete && _this.isActive) _this.observer.complete();\n            if (_this.onComplete) _this.onComplete();\n            _this.isActive = false;\n        };\n        this.error = function (err) {\n            if (_this.observer.error && _this.isActive) _this.observer.error(err);\n            _this.isActive = false;\n        };\n        this.observer = observer;\n        this.updateObserver = function (v) {\n            return observer.update(v);\n        };\n        this.onComplete = onComplete;\n        if (observer.update && middleware && middleware.length) {\n            middleware.forEach(function (m) {\n                return _this.updateObserver = m(_this.updateObserver, _this.complete);\n            });\n        }\n    }\n    return Observer;\n}();\nvar createObserver = function (observerCandidate, _a, onComplete) {\n    var middleware = _a.middleware;\n    if (typeof observerCandidate === 'function') {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, { update: observerCandidate });\n    } else {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, observerCandidate);\n    }\n};\n\nvar Action = /*#__PURE__*/function (_super) {\n    __extends(Action, _super);\n    function Action() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Action.prototype.create = function (props) {\n        return new Action(props);\n    };\n    Action.prototype.start = function (observerCandidate) {\n        if (observerCandidate === void 0) {\n            observerCandidate = {};\n        }\n        var isComplete = false;\n        var subscription = {\n            stop: function () {\n                return undefined;\n            }\n        };\n        var _a = this.props,\n            init = _a.init,\n            observerProps = __rest(_a, [\"init\"]);\n        var observer = createObserver(observerCandidate, observerProps, function () {\n            isComplete = true;\n            subscription.stop();\n        });\n        var api = init(observer);\n        subscription = api ? __assign({}, subscription, api) : subscription;\n        if (observerCandidate.registerParent) {\n            observerCandidate.registerParent(subscription);\n        }\n        if (isComplete) subscription.stop();\n        return subscription;\n    };\n    return Action;\n}(Chainable);\nvar action = function (init) {\n    return new Action({ init: init });\n};\n\nvar BaseMulticast = /*#__PURE__*/function (_super) {\n    __extends(BaseMulticast, _super);\n    function BaseMulticast() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.subscribers = [];\n        return _this;\n    }\n    BaseMulticast.prototype.complete = function () {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.complete();\n        });\n    };\n    BaseMulticast.prototype.error = function (err) {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.error(err);\n        });\n    };\n    BaseMulticast.prototype.update = function (v) {\n        for (var i = 0; i < this.subscribers.length; i++) {\n            this.subscribers[i].update(v);\n        }\n    };\n    BaseMulticast.prototype.subscribe = function (observerCandidate) {\n        var _this = this;\n        var observer = createObserver(observerCandidate, this.props);\n        this.subscribers.push(observer);\n        var subscription = {\n            unsubscribe: function () {\n                var index = _this.subscribers.indexOf(observer);\n                if (index !== -1) _this.subscribers.splice(index, 1);\n            }\n        };\n        return subscription;\n    };\n    BaseMulticast.prototype.stop = function () {\n        if (this.parent) this.parent.stop();\n    };\n    BaseMulticast.prototype.registerParent = function (subscription) {\n        this.stop();\n        this.parent = subscription;\n    };\n    return BaseMulticast;\n}(Chainable);\n\nvar Multicast = /*#__PURE__*/function (_super) {\n    __extends(Multicast, _super);\n    function Multicast() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Multicast.prototype.create = function (props) {\n        return new Multicast(props);\n    };\n    return Multicast;\n}(BaseMulticast);\nvar multicast = function () {\n    return new Multicast();\n};\n\nvar stepProgress = function (steps, progress$$1) {\n    var segment = 1 / (steps - 1);\n    var subsegment = 1 / (2 * (steps - 1));\n    var percentProgressOfTarget = Math.min(progress$$1, 1);\n    var subsegmentProgressOfTarget = percentProgressOfTarget / subsegment;\n    var segmentProgressOfTarget = Math.floor((subsegmentProgressOfTarget + 1) / 2);\n    return segmentProgressOfTarget * segment;\n};\n\nvar calc = /*#__PURE__*/Object.freeze({\n    angle: angle,\n    degreesToRadians: degreesToRadians,\n    distance: distance,\n    isPoint3D: isPoint3D,\n    isPoint: isPoint,\n    dilate: mix,\n    getValueFromProgress: mix,\n    pointFromAngleAndDistance: pointFromVector,\n    getProgressFromValue: progress,\n    radiansToDegrees: radiansToDegrees,\n    smooth: smoothFrame,\n    speedPerFrame: velocityPerFrame,\n    speedPerSecond: velocityPerSecond,\n    stepProgress: stepProgress\n});\n\nvar isValueList = function (v) {\n    return Array.isArray(v);\n};\nvar isSingleValue = function (v) {\n    var typeOfV = typeof v;\n    return typeOfV === 'string' || typeOfV === 'number';\n};\nvar ValueReaction = /*#__PURE__*/function (_super) {\n    __extends(ValueReaction, _super);\n    function ValueReaction(props) {\n        var _this = _super.call(this, props) || this;\n        _this.scheduleVelocityCheck = function () {\n            return sync.postRender(_this.velocityCheck);\n        };\n        _this.velocityCheck = function (_a) {\n            var timestamp = _a.timestamp;\n            if (timestamp !== _this.lastUpdated) {\n                _this.prev = _this.current;\n            }\n        };\n        _this.prev = _this.current = props.value || 0;\n        if (isSingleValue(_this.current)) {\n            _this.updateCurrent = function (v) {\n                return _this.current = v;\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getSingleVelocity(_this.current, _this.prev);\n            };\n        } else if (isValueList(_this.current)) {\n            _this.updateCurrent = function (v) {\n                return _this.current = v.slice();\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getListVelocity();\n            };\n        } else {\n            _this.updateCurrent = function (v) {\n                _this.current = {};\n                for (var key in v) {\n                    if (v.hasOwnProperty(key)) {\n                        _this.current[key] = v[key];\n                    }\n                }\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getMapVelocity();\n            };\n        }\n        if (props.initialSubscription) _this.subscribe(props.initialSubscription);\n        return _this;\n    }\n    ValueReaction.prototype.create = function (props) {\n        return new ValueReaction(props);\n    };\n    ValueReaction.prototype.get = function () {\n        return this.current;\n    };\n    ValueReaction.prototype.getVelocity = function () {\n        return this.getVelocityOfCurrent();\n    };\n    ValueReaction.prototype.update = function (v) {\n        _super.prototype.update.call(this, v);\n        this.prev = this.current;\n        this.updateCurrent(v);\n        var _a = getFrameData(),\n            delta = _a.delta,\n            timestamp = _a.timestamp;\n        this.timeDelta = delta;\n        this.lastUpdated = timestamp;\n        sync.postRender(this.scheduleVelocityCheck);\n    };\n    ValueReaction.prototype.subscribe = function (observerCandidate) {\n        var sub = _super.prototype.subscribe.call(this, observerCandidate);\n        this.subscribers[this.subscribers.length - 1].update(this.current);\n        return sub;\n    };\n    ValueReaction.prototype.getSingleVelocity = function (current, prev) {\n        return typeof current === 'number' && typeof prev === 'number' ? velocityPerSecond(current - prev, this.timeDelta) : velocityPerSecond(parseFloat(current) - parseFloat(prev), this.timeDelta) || 0;\n    };\n    ValueReaction.prototype.getListVelocity = function () {\n        var _this = this;\n        return this.current.map(function (c, i) {\n            return _this.getSingleVelocity(c, _this.prev[i]);\n        });\n    };\n    ValueReaction.prototype.getMapVelocity = function () {\n        var velocity = {};\n        for (var key in this.current) {\n            if (this.current.hasOwnProperty(key)) {\n                velocity[key] = this.getSingleVelocity(this.current[key], this.prev[key]);\n            }\n        }\n        return velocity;\n    };\n    return ValueReaction;\n}(BaseMulticast);\nvar value = function (value, initialSubscription) {\n    return new ValueReaction({ value: value, initialSubscription: initialSubscription });\n};\n\nvar multi = function (_a) {\n    var getCount = _a.getCount,\n        getFirst = _a.getFirst,\n        getOutput = _a.getOutput,\n        mapApi = _a.mapApi,\n        setProp = _a.setProp,\n        startActions = _a.startActions;\n    return function (actions) {\n        return action(function (_a) {\n            var update = _a.update,\n                complete = _a.complete,\n                error = _a.error;\n            var numActions = getCount(actions);\n            var output = getOutput();\n            var updateOutput = function () {\n                return update(output);\n            };\n            var numCompletedActions = 0;\n            var subs = startActions(actions, function (a, name) {\n                var hasCompleted = false;\n                return a.start({\n                    complete: function () {\n                        if (!hasCompleted) {\n                            hasCompleted = true;\n                            numCompletedActions++;\n                            if (numCompletedActions === numActions) sync.update(complete);\n                        }\n                    },\n                    error: error,\n                    update: function (v) {\n                        setProp(output, name, v);\n                        sync.update(updateOutput, false, true);\n                    }\n                });\n            });\n            return Object.keys(getFirst(subs)).reduce(function (api, methodName) {\n                api[methodName] = mapApi(subs, methodName);\n                return api;\n            }, {});\n        });\n    };\n};\n\nvar composite = /*#__PURE__*/multi({\n    getOutput: function () {\n        return {};\n    },\n    getCount: function (subs) {\n        return Object.keys(subs).length;\n    },\n    getFirst: function (subs) {\n        return subs[Object.keys(subs)[0]];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return Object.keys(subs).reduce(function (output, propKey) {\n                var _a;\n                if (subs[propKey][methodName]) {\n                    args[0] && args[0][propKey] !== undefined ? output[propKey] = subs[propKey][methodName](args[0][propKey]) : output[propKey] = (_a = subs[propKey])[methodName].apply(_a, args);\n                }\n                return output;\n            }, {});\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return Object.keys(actions).reduce(function (subs, key) {\n            subs[key] = starter(actions[key], key);\n            return subs;\n        }, {});\n    }\n});\n\nvar parallel = /*#__PURE__*/multi({\n    getOutput: function () {\n        return [];\n    },\n    getCount: function (subs) {\n        return subs.length;\n    },\n    getFirst: function (subs) {\n        return subs[0];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return subs.map(function (sub, i) {\n                if (sub[methodName]) {\n                    return Array.isArray(args[0]) ? sub[methodName](args[0][i]) : sub[methodName].apply(sub, args);\n                }\n            });\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return actions.map(function (action, i) {\n            return starter(action, i);\n        });\n    }\n});\nvar parallel$1 = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return parallel(actions);\n};\n\nvar createVectorTests = function (typeTests) {\n    var testNames = Object.keys(typeTests);\n    var isVectorProp = function (prop, key) {\n        return prop !== undefined && !typeTests[key](prop);\n    };\n    var getVectorKeys = function (props) {\n        return testNames.reduce(function (vectorKeys, key) {\n            if (isVectorProp(props[key], key)) vectorKeys.push(key);\n            return vectorKeys;\n        }, []);\n    };\n    var testVectorProps = function (props) {\n        return props && testNames.some(function (key) {\n            return isVectorProp(props[key], key);\n        });\n    };\n    return { getVectorKeys: getVectorKeys, testVectorProps: testVectorProps };\n};\nvar unitTypes = [px, percent, degrees, vh, vw];\nvar findUnitType = function (prop) {\n    return unitTypes.find(function (type) {\n        return type.test(prop);\n    });\n};\nvar isUnitProp = function (prop) {\n    return Boolean(findUnitType(prop));\n};\nvar createAction = function (action, props) {\n    return action(props);\n};\nvar reduceArrayValue = function (i) {\n    return function (props, key) {\n        props[key] = props[key][i];\n        return props;\n    };\n};\nvar createArrayAction = function (action, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionList = props[firstVectorKey].map(function (v, i) {\n        var childActionProps = vectorKeys.reduce(reduceArrayValue(i), __assign({}, props));\n        return getActionCreator(v)(action, childActionProps);\n    });\n    return parallel$1.apply(void 0, actionList);\n};\nvar reduceObjectValue = function (key) {\n    return function (props, propKey) {\n        props[propKey] = props[propKey][key];\n        return props;\n    };\n};\nvar createObjectAction = function (action, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionMap = Object.keys(props[firstVectorKey]).reduce(function (map, key) {\n        var childActionProps = vectorKeys.reduce(reduceObjectValue(key), __assign({}, props));\n        map[key] = getActionCreator(props[firstVectorKey][key])(action, childActionProps);\n        return map;\n    }, {});\n    return composite(actionMap);\n};\nvar createUnitAction = function (action, _a) {\n    var from = _a.from,\n        to = _a.to,\n        props = __rest(_a, [\"from\", \"to\"]);\n    var unitType = findUnitType(from) || findUnitType(to);\n    var transform = unitType.transform,\n        parse = unitType.parse;\n    return action(__assign({}, props, { from: typeof from === 'string' ? parse(from) : from, to: typeof to === 'string' ? parse(to) : to })).pipe(transform);\n};\nvar createMixerAction = function (mixer) {\n    return function (action, _a) {\n        var from = _a.from,\n            to = _a.to,\n            props = __rest(_a, [\"from\", \"to\"]);\n        return action(__assign({}, props, { from: 0, to: 1 })).pipe(mixer(from, to));\n    };\n};\nvar createColorAction = /*#__PURE__*/createMixerAction(mixColor);\nvar createComplexAction = /*#__PURE__*/createMixerAction(mixComplex);\nvar createVectorAction = function (action, typeTests) {\n    var _a = createVectorTests(typeTests),\n        testVectorProps = _a.testVectorProps,\n        getVectorKeys = _a.getVectorKeys;\n    var vectorAction = function (props) {\n        var isVector = testVectorProps(props);\n        if (!isVector) return action(props);\n        var vectorKeys = getVectorKeys(props);\n        var testKey = vectorKeys[0];\n        var testProp = props[testKey];\n        return getActionCreator(testProp)(action, props, vectorKeys);\n    };\n    return vectorAction;\n};\nvar getActionCreator = function (prop) {\n    if (typeof prop === 'number') {\n        return createAction;\n    } else if (Array.isArray(prop)) {\n        return createArrayAction;\n    } else if (isUnitProp(prop)) {\n        return createUnitAction;\n    } else if (color.test(prop)) {\n        return createColorAction;\n    } else if (complex.test(prop)) {\n        return createComplexAction;\n    } else if (typeof prop === 'object') {\n        return createObjectAction;\n    } else {\n        return createAction;\n    }\n};\n\nvar decay = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0 : _b,\n            _c = props.from,\n            from = _c === void 0 ? 0 : _c,\n            _d = props.power,\n            power = _d === void 0 ? 0.8 : _d,\n            _e = props.timeConstant,\n            timeConstant = _e === void 0 ? 350 : _e,\n            _f = props.restDelta,\n            restDelta = _f === void 0 ? 0.5 : _f,\n            modifyTarget = props.modifyTarget;\n        var elapsed = 0;\n        var amplitude = power * velocity;\n        var idealTarget = Math.round(from + amplitude);\n        var target = typeof modifyTarget === 'undefined' ? idealTarget : modifyTarget(idealTarget);\n        var process = sync.update(function (_a) {\n            var frameDelta = _a.delta;\n            elapsed += frameDelta;\n            var delta = -amplitude * Math.exp(-elapsed / timeConstant);\n            var isMoving = delta > restDelta || delta < -restDelta;\n            var current = isMoving ? target + delta : target;\n            update(current);\n            if (!isMoving) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorDecay = /*#__PURE__*/createVectorAction(decay, {\n    from: number.test,\n    modifyTarget: function (func) {\n        return typeof func === 'function';\n    },\n    velocity: number.test\n});\n\nvar spring = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0.0 : _b;\n        var _c = props.from,\n            from = _c === void 0 ? 0.0 : _c,\n            _d = props.to,\n            to = _d === void 0 ? 0.0 : _d,\n            _e = props.stiffness,\n            stiffness = _e === void 0 ? 100 : _e,\n            _f = props.damping,\n            damping = _f === void 0 ? 10 : _f,\n            _g = props.mass,\n            mass = _g === void 0 ? 1.0 : _g,\n            _h = props.restSpeed,\n            restSpeed = _h === void 0 ? 0.01 : _h,\n            _j = props.restDelta,\n            restDelta = _j === void 0 ? 0.01 : _j;\n        var initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n        var t = 0;\n        var delta = to - from;\n        var position = from;\n        var prevPosition = position;\n        var process = sync.update(function (_a) {\n            var timeDelta = _a.delta;\n            t += timeDelta;\n            var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n            var angularFreq = Math.sqrt(stiffness / mass) / 1000;\n            prevPosition = position;\n            if (dampingRatio < 1) {\n                var envelope = Math.exp(-dampingRatio * angularFreq * t);\n                var expoDecay = angularFreq * Math.sqrt(1.0 - dampingRatio * dampingRatio);\n                position = to - envelope * ((initialVelocity + dampingRatio * angularFreq * delta) / expoDecay * Math.sin(expoDecay * t) + delta * Math.cos(expoDecay * t));\n            } else {\n                var envelope = Math.exp(-angularFreq * t);\n                position = to - envelope * (delta + (initialVelocity + angularFreq * delta) * t);\n            }\n            velocity = velocityPerSecond(position - prevPosition, timeDelta);\n            var isBelowVelocityThreshold = Math.abs(velocity) <= restSpeed;\n            var isBelowDisplacementThreshold = Math.abs(to - position) <= restDelta;\n            if (isBelowVelocityThreshold && isBelowDisplacementThreshold) {\n                position = to;\n                update(position);\n                cancelSync.update(process);\n                complete();\n            } else {\n                update(position);\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorSpring = /*#__PURE__*/createVectorAction(spring, {\n    from: number.test,\n    to: number.test,\n    stiffness: number.test,\n    damping: number.test,\n    mass: number.test,\n    velocity: number.test\n});\n\nvar inertia = function (_a) {\n    var _b = _a.from,\n        from = _b === void 0 ? 0 : _b,\n        _c = _a.velocity,\n        velocity = _c === void 0 ? 0 : _c,\n        min = _a.min,\n        max = _a.max,\n        _d = _a.power,\n        power = _d === void 0 ? 0.8 : _d,\n        _e = _a.timeConstant,\n        timeConstant = _e === void 0 ? 700 : _e,\n        _f = _a.bounceStiffness,\n        bounceStiffness = _f === void 0 ? 500 : _f,\n        _g = _a.bounceDamping,\n        bounceDamping = _g === void 0 ? 10 : _g,\n        _h = _a.restDelta,\n        restDelta = _h === void 0 ? 1 : _h,\n        modifyTarget = _a.modifyTarget;\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var current = value(from);\n        var activeAnimation;\n        var isSpring = false;\n        var isLessThanMin = function (v) {\n            return min !== undefined && v <= min;\n        };\n        var isMoreThanMax = function (v) {\n            return max !== undefined && v >= max;\n        };\n        var isOutOfBounds = function (v) {\n            return isLessThanMin(v) || isMoreThanMax(v);\n        };\n        var isTravellingAwayFromBounds = function (v, currentVelocity) {\n            return isLessThanMin(v) && currentVelocity < 0 || isMoreThanMax(v) && currentVelocity > 0;\n        };\n        var startAnimation = function (animation, next) {\n            activeAnimation && activeAnimation.stop();\n            activeAnimation = animation.start({\n                update: function (v) {\n                    return current.update(v);\n                },\n                complete: function () {\n                    if (next) {\n                        next();\n                        return;\n                    }\n                    complete();\n                }\n            });\n        };\n        var startSpring = function (props) {\n            isSpring = true;\n            startAnimation(vectorSpring(__assign({}, props, { to: isLessThanMin(props.from) ? min : max, stiffness: bounceStiffness, damping: bounceDamping, restDelta: restDelta })));\n        };\n        current.subscribe(function (v) {\n            update(v);\n            var currentVelocity = current.getVelocity();\n            if (activeAnimation && !isSpring && isTravellingAwayFromBounds(v, currentVelocity)) {\n                startSpring({ from: v, velocity: currentVelocity });\n            }\n        });\n        if (isOutOfBounds(from)) {\n            startSpring({ from: from, velocity: velocity });\n        } else if (velocity !== 0) {\n            var animation = vectorDecay({\n                from: from,\n                velocity: velocity,\n                timeConstant: timeConstant,\n                power: power,\n                restDelta: isOutOfBounds(from) ? 20 : restDelta,\n                modifyTarget: modifyTarget\n            });\n            startAnimation(animation, function () {\n                var v = current.get();\n                if (isOutOfBounds(v)) {\n                    startSpring({ from: v, velocity: current.getVelocity() });\n                } else {\n                    complete();\n                }\n            });\n        } else {\n            complete();\n        }\n        return {\n            stop: function () {\n                return activeAnimation && activeAnimation.stop();\n            }\n        };\n    });\n};\nvar index = /*#__PURE__*/createVectorAction(inertia, {\n    from: number.test,\n    velocity: number.test,\n    min: number.test,\n    max: number.test,\n    damping: number.test,\n    stiffness: number.test,\n    modifyTarget: function (func) {\n        return typeof func === 'function';\n    }\n});\n\nvar frame = function () {\n    return action(function (_a) {\n        var update = _a.update;\n        var initialTime = 0;\n        var process = sync.update(function (_a) {\n            var timestamp = _a.timestamp;\n            if (!initialTime) initialTime = timestamp;\n            update(timestamp - initialTime);\n        }, true, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\n\nvar scrubber = function (_a) {\n    var _b = _a.from,\n        from = _b === void 0 ? 0 : _b,\n        _c = _a.to,\n        to = _c === void 0 ? 1 : _c,\n        _d = _a.ease,\n        ease = _d === void 0 ? linear : _d,\n        _e = _a.reverseEase,\n        reverseEase = _e === void 0 ? false : _e;\n    if (reverseEase) {\n        ease = createReversedEasing(ease);\n    }\n    return action(function (_a) {\n        var update = _a.update;\n        return {\n            seek: function (progress$$1) {\n                return update(progress$$1);\n            }\n        };\n    }).pipe(ease, function (v) {\n        return mix(from, to, v);\n    });\n};\nvar vectorScrubber = /*#__PURE__*/createVectorAction(scrubber, {\n    ease: function (func) {\n        return typeof func === 'function';\n    },\n    from: number.test,\n    to: number.test\n});\n\nvar clampProgress = /*#__PURE__*/clamp(0, 1);\nvar tween = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.duration,\n            duration = _b === void 0 ? 300 : _b,\n            _c = props.ease,\n            ease = _c === void 0 ? easeOut : _c,\n            _d = props.flip,\n            flip = _d === void 0 ? 0 : _d,\n            _e = props.loop,\n            loop = _e === void 0 ? 0 : _e,\n            _f = props.yoyo,\n            yoyo = _f === void 0 ? 0 : _f,\n            _g = props.repeatDelay,\n            repeatDelay = _g === void 0 ? 0 : _g;\n        var _h = props.from,\n            from = _h === void 0 ? 0 : _h,\n            _j = props.to,\n            to = _j === void 0 ? 1 : _j,\n            _k = props.elapsed,\n            elapsed = _k === void 0 ? 0 : _k,\n            _l = props.flipCount,\n            flipCount = _l === void 0 ? 0 : _l,\n            _m = props.yoyoCount,\n            yoyoCount = _m === void 0 ? 0 : _m,\n            _o = props.loopCount,\n            loopCount = _o === void 0 ? 0 : _o;\n        var playhead = vectorScrubber({ from: from, to: to, ease: ease }).start(update);\n        var currentProgress = 0;\n        var process;\n        var isActive = false;\n        var reverseAnimation = function (reverseEase) {\n            if (reverseEase === void 0) {\n                reverseEase = false;\n            }\n            var _a;\n            _a = [to, from], from = _a[0], to = _a[1];\n            playhead = vectorScrubber({ from: from, to: to, ease: ease, reverseEase: reverseEase }).start(update);\n        };\n        var isTweenComplete = function () {\n            var isComplete = isActive && elapsed > duration + repeatDelay;\n            if (!isComplete) return false;\n            if (isComplete && !loop && !flip && !yoyo) return true;\n            elapsed = duration - (elapsed - repeatDelay);\n            if (loop && loopCount < loop) {\n                loopCount++;\n                return false;\n            } else if (flip && flipCount < flip) {\n                flipCount++;\n                reverseAnimation();\n                return false;\n            } else if (yoyo && yoyoCount < yoyo) {\n                yoyoCount++;\n                reverseAnimation(yoyoCount % 2 !== 0);\n                return false;\n            }\n            return true;\n        };\n        var updateTween = function () {\n            currentProgress = clampProgress(progress(0, duration, elapsed));\n            playhead.seek(currentProgress);\n        };\n        var startTimer = function () {\n            isActive = true;\n            process = sync.update(function (_a) {\n                var delta = _a.delta;\n                elapsed += delta;\n                updateTween();\n                if (isTweenComplete()) {\n                    cancelSync.update(process);\n                    complete && sync.update(complete, false, true);\n                }\n            }, true);\n        };\n        var stopTimer = function () {\n            isActive = false;\n            if (process) cancelSync.update(process);\n        };\n        startTimer();\n        return {\n            isActive: function () {\n                return isActive;\n            },\n            getElapsed: function () {\n                return clamp(0, duration, elapsed);\n            },\n            getProgress: function () {\n                return currentProgress;\n            },\n            stop: function () {\n                stopTimer();\n            },\n            pause: function () {\n                stopTimer();\n                return this;\n            },\n            resume: function () {\n                if (!isActive) startTimer();\n                return this;\n            },\n            seek: function (newProgress) {\n                elapsed = mix(0, duration, newProgress);\n                sync.update(updateTween, false, true);\n                return this;\n            },\n            reverse: function () {\n                reverseAnimation();\n                return this;\n            }\n        };\n    });\n};\n\nvar clampProgress$1 = /*#__PURE__*/clamp(0, 1);\nvar defaultEasings = function (values, easing$$1) {\n    return values.map(function () {\n        return easing$$1 || easeOut;\n    }).splice(0, values.length - 1);\n};\nvar defaultTimings = function (values) {\n    var numValues = values.length;\n    return values.map(function (value, i) {\n        return i !== 0 ? i / (numValues - 1) : 0;\n    });\n};\nvar interpolateScrubbers = function (input, scrubbers, update) {\n    var rangeLength = input.length;\n    var finalInputIndex = rangeLength - 1;\n    var finalScrubberIndex = finalInputIndex - 1;\n    var subs = scrubbers.map(function (scrub) {\n        return scrub.start(update);\n    });\n    return function (v) {\n        if (v <= input[0]) {\n            subs[0].seek(0);\n        }\n        if (v >= input[finalInputIndex]) {\n            subs[finalScrubberIndex].seek(1);\n        }\n        var i = 1;\n        for (; i < rangeLength; i++) {\n            if (input[i] > v || i === finalInputIndex) break;\n        }\n        var progressInRange = progress(input[i - 1], input[i], v);\n        subs[i - 1].seek(clampProgress$1(progressInRange));\n    };\n};\nvar keyframes = function (_a) {\n    var easings = _a.easings,\n        _b = _a.ease,\n        ease = _b === void 0 ? linear : _b,\n        times = _a.times,\n        values = _a.values,\n        tweenProps = __rest(_a, [\"easings\", \"ease\", \"times\", \"values\"]);\n    easings = Array.isArray(easings) ? easings : defaultEasings(values, easings);\n    times = times || defaultTimings(values);\n    var scrubbers = easings.map(function (easing$$1, i) {\n        return vectorScrubber({\n            from: values[i],\n            to: values[i + 1],\n            ease: easing$$1\n        });\n    });\n    return tween(__assign({}, tweenProps, { ease: ease })).applyMiddleware(function (update) {\n        return interpolateScrubbers(times, scrubbers, update);\n    });\n};\n\nvar physics = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.acceleration,\n            acceleration = _b === void 0 ? 0 : _b,\n            _c = props.friction,\n            friction = _c === void 0 ? 0 : _c,\n            _d = props.velocity,\n            velocity = _d === void 0 ? 0 : _d,\n            springStrength = props.springStrength,\n            to = props.to;\n        var _e = props.restSpeed,\n            restSpeed = _e === void 0 ? 0.001 : _e,\n            _f = props.from,\n            from = _f === void 0 ? 0 : _f;\n        var current = from;\n        var process = sync.update(function (_a) {\n            var delta = _a.delta;\n            var elapsed = Math.max(delta, 16);\n            if (acceleration) velocity += velocityPerFrame(acceleration, elapsed);\n            if (friction) velocity *= Math.pow(1 - friction, elapsed / 100);\n            if (springStrength !== undefined && to !== undefined) {\n                var distanceToTarget = to - current;\n                velocity += distanceToTarget * velocityPerFrame(springStrength, elapsed);\n            }\n            current += velocityPerFrame(velocity, elapsed);\n            update(current);\n            var isComplete = restSpeed !== false && (!velocity || Math.abs(velocity) <= restSpeed);\n            if (isComplete) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            set: function (v) {\n                current = v;\n                return this;\n            },\n            setAcceleration: function (v) {\n                acceleration = v;\n                return this;\n            },\n            setFriction: function (v) {\n                friction = v;\n                return this;\n            },\n            setSpringStrength: function (v) {\n                springStrength = v;\n                return this;\n            },\n            setSpringTarget: function (v) {\n                to = v;\n                return this;\n            },\n            setVelocity: function (v) {\n                velocity = v;\n                return this;\n            },\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorPhysics = /*#__PURE__*/createVectorAction(physics, {\n    acceleration: number.test,\n    friction: number.test,\n    velocity: number.test,\n    from: number.test,\n    to: number.test,\n    springStrength: number.test\n});\n\nvar DEFAULT_DURATION = 300;\nvar flattenTimings = function (instructions) {\n    var flatInstructions = [];\n    var lastArg = instructions[instructions.length - 1];\n    var isStaggered = typeof lastArg === 'number';\n    var staggerDelay = isStaggered ? lastArg : 0;\n    var segments = isStaggered ? instructions.slice(0, -1) : instructions;\n    var numSegments = segments.length;\n    var offset = 0;\n    segments.forEach(function (item, i) {\n        flatInstructions.push(item);\n        if (i !== numSegments - 1) {\n            var duration = item.duration || DEFAULT_DURATION;\n            offset += staggerDelay;\n            flatInstructions.push(\"-\" + (duration - offset));\n        }\n    });\n    return flatInstructions;\n};\nvar flattenArrayInstructions = function (instructions, instruction) {\n    Array.isArray(instruction) ? instructions.push.apply(instructions, flattenTimings(instruction)) : instructions.push(instruction);\n    return instructions;\n};\nvar convertDefToProps = function (props, def, i) {\n    var duration = props.duration,\n        easings = props.easings,\n        times = props.times,\n        values = props.values;\n    var numValues = values.length;\n    var prevTimeTo = times[numValues - 1];\n    var timeFrom = def.at === 0 ? 0 : def.at / duration;\n    var timeTo = (def.at + def.duration) / duration;\n    if (i === 0) {\n        values.push(def.from);\n        times.push(timeFrom);\n    } else {\n        if (prevTimeTo !== timeFrom) {\n            if (def.from !== undefined) {\n                values.push(values[numValues - 1]);\n                times.push(timeFrom);\n                easings.push(linear);\n            }\n            var from = def.from !== undefined ? def.from : values[numValues - 1];\n            values.push(from);\n            times.push(timeFrom);\n            easings.push(linear);\n        } else if (def.from !== undefined) {\n            values.push(def.from);\n            times.push(timeFrom);\n            easings.push(linear);\n        }\n    }\n    values.push(def.to);\n    times.push(timeTo);\n    easings.push(def.ease || easeInOut);\n    return props;\n};\nvar timeline = function (instructions, _a) {\n    var _b = _a === void 0 ? {} : _a,\n        duration = _b.duration,\n        elapsed = _b.elapsed,\n        ease = _b.ease,\n        loop = _b.loop,\n        flip = _b.flip,\n        yoyo = _b.yoyo;\n    var playhead = 0;\n    var calculatedDuration = 0;\n    var flatInstructions = instructions.reduce(flattenArrayInstructions, []);\n    var animationDefs = [];\n    flatInstructions.forEach(function (instruction) {\n        if (typeof instruction === 'string') {\n            playhead += parseFloat(instruction);\n        } else if (typeof instruction === 'number') {\n            playhead = instruction;\n        } else {\n            var def = __assign({}, instruction, { at: playhead });\n            def.duration = def.duration === undefined ? DEFAULT_DURATION : def.duration;\n            animationDefs.push(def);\n            playhead += def.duration;\n            calculatedDuration = Math.max(calculatedDuration, def.at + def.duration);\n        }\n    });\n    var tracks = {};\n    var numDefs = animationDefs.length;\n    for (var i = 0; i < numDefs; i++) {\n        var def = animationDefs[i];\n        var track = def.track;\n        if (track === undefined) {\n            throw new Error('No track defined');\n        }\n        if (!tracks.hasOwnProperty(track)) tracks[track] = [];\n        tracks[track].push(def);\n    }\n    var trackKeyframes = {};\n    for (var key in tracks) {\n        if (tracks.hasOwnProperty(key)) {\n            var keyframeProps = tracks[key].reduce(convertDefToProps, {\n                duration: calculatedDuration,\n                easings: [],\n                times: [],\n                values: []\n            });\n            trackKeyframes[key] = keyframes(__assign({}, keyframeProps, { duration: duration || calculatedDuration, ease: ease,\n                elapsed: elapsed,\n                loop: loop,\n                yoyo: yoyo,\n                flip: flip }));\n        }\n    }\n    return composite(trackKeyframes);\n};\n\nvar listen = function (element, events, options) {\n    return action(function (_a) {\n        var update = _a.update;\n        var eventNames = events.split(' ').map(function (eventName) {\n            element.addEventListener(eventName, update, options);\n            return eventName;\n        });\n        return {\n            stop: function () {\n                return eventNames.forEach(function (eventName) {\n                    return element.removeEventListener(eventName, update, options);\n                });\n            }\n        };\n    });\n};\n\nvar defaultPointerPos = function () {\n    return {\n        clientX: 0,\n        clientY: 0,\n        pageX: 0,\n        pageY: 0,\n        x: 0,\n        y: 0\n    };\n};\nvar eventToPoint = function (e, point) {\n    if (point === void 0) {\n        point = defaultPointerPos();\n    }\n    point.clientX = point.x = e.clientX;\n    point.clientY = point.y = e.clientY;\n    point.pageX = e.pageX;\n    point.pageY = e.pageY;\n    return point;\n};\n\nvar points = [/*#__PURE__*/defaultPointerPos()];\nvar isTouchDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointsLocation = function (_a) {\n        var touches = _a.touches;\n        isTouchDevice = true;\n        var numTouches = touches.length;\n        points.length = 0;\n        for (var i = 0; i < numTouches; i++) {\n            var thisTouch = touches[i];\n            points.push(eventToPoint(thisTouch));\n        }\n    };\n    listen(document, 'touchstart touchmove', {\n        passive: true,\n        capture: true\n    }).start(updatePointsLocation);\n}\nvar multitouch = function (_a) {\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.preventDefault,\n        preventDefault = _c === void 0 ? true : _c,\n        _d = _b.scale,\n        scale = _d === void 0 ? 1.0 : _d,\n        _e = _b.rotate,\n        rotate = _e === void 0 ? 0.0 : _e;\n    return action(function (_a) {\n        var update = _a.update;\n        var output = {\n            touches: points,\n            scale: scale,\n            rotate: rotate\n        };\n        var initialDistance = 0.0;\n        var initialRotation = 0.0;\n        var isGesture = points.length > 1;\n        if (isGesture) {\n            var firstTouch = points[0],\n                secondTouch = points[1];\n            initialDistance = distance(firstTouch, secondTouch);\n            initialRotation = angle(firstTouch, secondTouch);\n        }\n        var updatePoint = function () {\n            if (isGesture) {\n                var firstTouch = points[0],\n                    secondTouch = points[1];\n                var newDistance = distance(firstTouch, secondTouch);\n                var newRotation = angle(firstTouch, secondTouch);\n                output.scale = scale * (newDistance / initialDistance);\n                output.rotate = rotate + (newRotation - initialRotation);\n            }\n            update(output);\n        };\n        var onMove = function (e) {\n            if (preventDefault || e.touches.length > 1) e.preventDefault();\n            sync.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'touchmove', {\n            passive: !preventDefault\n        }).start(onMove);\n        if (isTouchDevice) sync.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\nvar getIsTouchDevice = function () {\n    return isTouchDevice;\n};\n\nvar point = /*#__PURE__*/defaultPointerPos();\nvar isMouseDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointLocation = function (e) {\n        isMouseDevice = true;\n        eventToPoint(e, point);\n    };\n    listen(document, 'mousedown mousemove', true).start(updatePointLocation);\n}\nvar mouse = function (_a) {\n    var _b = (_a === void 0 ? {} : _a).preventDefault,\n        preventDefault = _b === void 0 ? true : _b;\n    return action(function (_a) {\n        var update = _a.update;\n        var updatePoint = function () {\n            return update(point);\n        };\n        var onMove = function (e) {\n            if (preventDefault) e.preventDefault();\n            sync.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'mousemove').start(onMove);\n        if (isMouseDevice) sync.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\n\nvar getFirstTouch = function (_a) {\n    var firstTouch = _a[0];\n    return firstTouch;\n};\nvar pointer = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return getIsTouchDevice() ? multitouch(props).pipe(function (_a) {\n        var touches = _a.touches;\n        return touches;\n    }, getFirstTouch) : mouse(props);\n};\nvar index$1 = function (_a) {\n    if (_a === void 0) {\n        _a = {};\n    }\n    var x = _a.x,\n        y = _a.y,\n        props = __rest(_a, [\"x\", \"y\"]);\n    if (x !== undefined || y !== undefined) {\n        var applyXOffset_1 = applyOffset(x || 0);\n        var applyYOffset_1 = applyOffset(y || 0);\n        var delta_1 = { x: 0, y: 0 };\n        return pointer(props).pipe(function (point) {\n            delta_1.x = applyXOffset_1(point.x);\n            delta_1.y = applyYOffset_1(point.y);\n            return delta_1;\n        });\n    } else {\n        return pointer(props);\n    }\n};\n\nvar chain = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var i = 0;\n        var current;\n        var playCurrent = function () {\n            current = actions[i].start({\n                complete: function () {\n                    i++;\n                    i >= actions.length ? complete() : playCurrent();\n                },\n                update: update\n            });\n        };\n        playCurrent();\n        return {\n            stop: function () {\n                return current && current.stop();\n            }\n        };\n    });\n};\n\nvar crossfade = function (a, b) {\n    return action(function (observer) {\n        var balance = 0;\n        var fadable = parallel$1(a, b).start(__assign({}, observer, { update: function (_a) {\n                var va = _a[0],\n                    vb = _a[1];\n                observer.update(mix(va, vb, balance));\n            } }));\n        return {\n            setBalance: function (v) {\n                return balance = v;\n            },\n            stop: function () {\n                return fadable.stop();\n            }\n        };\n    });\n};\n\nvar delay = function (timeToDelay) {\n    return action(function (_a) {\n        var complete = _a.complete;\n        var timeout = setTimeout(complete, timeToDelay);\n        return {\n            stop: function () {\n                return clearTimeout(timeout);\n            }\n        };\n    });\n};\n\nvar merge = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return action(function (observer) {\n        var subs = actions.map(function (thisAction) {\n            return thisAction.start(observer);\n        });\n        return {\n            stop: function () {\n                return subs.forEach(function (sub) {\n                    return sub.stop();\n                });\n            }\n        };\n    });\n};\n\nvar schedule = function (scheduler, schedulee) {\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var latest;\n        var schedulerSub = scheduler.start({\n            update: function () {\n                return latest !== undefined && update(latest);\n            },\n            complete: complete\n        });\n        var scheduleeSub = schedulee.start({\n            update: function (v) {\n                return latest = v;\n            },\n            complete: complete\n        });\n        return {\n            stop: function () {\n                schedulerSub.stop();\n                scheduleeSub.stop();\n            }\n        };\n    });\n};\n\nvar stagger = function (actions, interval) {\n    var intervalIsNumber = typeof interval === 'number';\n    var actionsWithDelay = actions.map(function (a, i) {\n        var timeToDelay = intervalIsNumber ? interval * i : interval(i);\n        return chain(delay(timeToDelay), a);\n    });\n    return parallel$1.apply(void 0, actionsWithDelay);\n};\n\nvar appendUnit = function (unit) {\n    return function (v) {\n        return \"\" + v + unit;\n    };\n};\nvar steps = function (st, min, max) {\n    if (min === void 0) {\n        min = 0;\n    }\n    if (max === void 0) {\n        max = 1;\n    }\n    return function (v) {\n        var current = progress(min, max, v);\n        return mix(min, max, stepProgress(st, current));\n    };\n};\nvar transformMap = function (childTransformers) {\n    return function (v) {\n        var output = __assign({}, v);\n        for (var key in childTransformers) {\n            if (childTransformers.hasOwnProperty(key)) {\n                var childTransformer = childTransformers[key];\n                output[key] = childTransformer(v[key]);\n            }\n        }\n        return output;\n    };\n};\n\nvar transformers = /*#__PURE__*/Object.freeze({\n    applyOffset: applyOffset,\n    clamp: clamp,\n    conditional: conditional,\n    interpolate: interpolate,\n    blendArray: mixArray,\n    blendColor: mixColor,\n    pipe: pipe,\n    smooth: smooth,\n    snap: snap,\n    generateStaticSpring: springForce,\n    nonlinearSpring: springForceExpo,\n    linearSpring: springForceLinear,\n    wrap: wrap,\n    appendUnit: appendUnit,\n    steps: steps,\n    transformMap: transformMap\n});\n\nvar css = function (element, props) {\n    warning(false, 'css() is deprecated, use styler instead');\n    return styler(element, props);\n};\nvar svg = function (element, props) {\n    warning(false, 'svg() is deprecated, use styler instead');\n    return styler(element, props);\n};\n\nexport { action, multicast, value, vectorDecay as decay, index as inertia, keyframes, frame as everyFrame, vectorPhysics as physics, vectorSpring as spring, timeline, tween, listen, index$1 as pointer, mouse, multitouch, chain, composite, crossfade, delay, merge, parallel$1 as parallel, schedule, stagger, calc, transformers as transform, css, svg, Action, ValueReaction };\n","import SoundCloudAudio from 'soundcloud-audio';\nimport { spring } from 'popmotion';\n\nimport floorFragmentShader from './shaders/floor/frag.glsl';\nimport glassFragmentShader from './shaders/glass/frag.glsl';\nimport generalVertexShader from './shaders/general/vert.glsl';\nimport snowFragmentShader from './shaders/snow/frag.glsl';\nimport snowVertexShader from './shaders/snow/vert.glsl';\n\nconst THREE = require('three');\nconst random = require('canvas-sketch-util').random;\n\nglobal.THREE = THREE;\n\nrequire('three/examples/js/controls/OrbitControls');\n\nconst randomInstance = random.createRandom();\nrandomInstance.setSeed('415761');\n\nconst settings = {\n  animate: true,\n  context: 'webgl',\n};\n\nfunction createSnowManMaterial() {\n  const material = new THREE.MeshLambertMaterial({\n    color: 0xd0e3f0,\n  });\n\n  material.emissive.setHex(0xffffff);\n  material.emissiveIntensity = 0.2;\n\n  return material;\n}\n\nfunction createFloorMaterial() {\n  return new THREE.ShaderMaterial({\n    uniforms: {\n      iTime: { value: 0.0 },\n      iResolution: new THREE.Uniform(new THREE.Vector2(2000, 2000)),\n    },\n\n    fragmentShader: floorFragmentShader,\n    vertexShader: generalVertexShader,\n  });\n}\n\nfunction createGlassMaterial() {\n  return new THREE.ShaderMaterial({\n    uniforms: {\n      iTime: { value: 0.0 },\n      iResolution: new THREE.Uniform(new THREE.Vector2(100, 100)),\n    },\n\n    fragmentShader: glassFragmentShader,\n    vertexShader: generalVertexShader,\n    side: THREE.DoubleSide,\n  });\n}\n\nfunction createSnowMaterial() {\n  const shaderPoint = THREE.ShaderLib.points;\n  const uniforms = {\n    ...shaderPoint.uniforms,\n    iTime: { value: 0 },\n    pSize: { value: 10 },\n    camPosition: new THREE.Uniform(new THREE.Vector3()),\n  };\n\n  return new THREE.ShaderMaterial({\n    uniforms,\n    transparent: true,\n    depthWrite: false,\n\n    // blending: THREE.AdditiveBlending,\n    blending: THREE.AdditiveBlending,\n\n    fragmentShader: snowFragmentShader,\n    vertexShader: snowVertexShader,\n  });\n}\n\nfunction createBlackMaterial() {\n  return new THREE.MeshLambertMaterial({\n    color: 0x30404d,\n  });\n}\n\nfunction createHatMaterial() {\n  return new THREE.MeshPhongMaterial({\n    color: 0xf5498b,\n  });\n}\n\nfunction createMouthMaterial() {\n  return new THREE.MeshLambertMaterial({\n    color: 0xff6655,\n  });\n}\n\nfunction createOrangeMaterial() {\n  return new THREE.MeshLambertMaterial({\n    color: 0xff6e4a,\n  });\n}\n\nfunction createWoodMaterial() {\n  return new THREE.MeshLambertMaterial({\n    color: 0xcc6e4a,\n  });\n}\n\nconst shadowMaterial = new THREE.ShadowMaterial();\nshadowMaterial.opacity = 0.9182;\n\nconst scPlayer = new SoundCloudAudio('b95f61a90da961736c03f659c03cb0cc');\n\nconst sketch = ({ context, canvas }) => {\n  let ready = false;\n\n  let target = 20;\n\n  const el = document.createElement('div');\n  el.innerHTML = 'Click to let it snow!';\n  el.style.cssText = 'position: absolute; font-size: 100px; font-weight: bold; cursor:pointer; font-family: cursive;';\n  canvas.parentNode.appendChild(el);\n\n  canvas.parentNode.addEventListener('mousedown', () => {\n    if (ready) {\n      return;\n    }\n\n    const targetAnimation = spring({ from: 20, to: 2, stiffness: 10 });\n    targetAnimation.start(v => (target = v));\n\n    canvas.parentNode.removeChild(el);\n    ready = true;\n\n    scPlayer.resolve('https://soundcloud.com/trap-seacrest/let-it-snow-trap-remix', data => {\n      scPlayer.play();\n\n      const audio = scPlayer.audio;\n      audio.crossOrigin = 'Anonymous';\n      audio.autoplay = true;\n      audio.play();\n    });\n  });\n\n  // Create a renderer\n  const renderer = new THREE.WebGLRenderer({\n    canvas: context.canvas,\n  });\n\n  renderer.setClearColor('hsl(200, 90%, 10%)', 1);\n  // renderer.setClearColor('#182026', 1);\n  renderer.shadowMap.enabled = true;\n  renderer.shadowMap.type = THREE.PCFSoftShadowMap; // default THREE.PCFShadowMap\n\n  const camera = new THREE.PerspectiveCamera(25, 2, 0.01, 100);\n  camera.position.set(10, 5, 5);\n\n  const controls = new THREE.OrbitControls(camera, context.canvas);\n  controls.minDistance = 3;\n  controls.maxDistance = 40;\n  controls.target.set(0, 2, 0);\n\n  const scene = new THREE.Scene();\n\n  // ---------------------------------------------\n  // Свет\n  // ---------------------------------------------\n\n  const whiteColor = 0xffffff;\n  const lightMain = new THREE.HemisphereLight(whiteColor, 0xffffff, 0.42);\n  scene.add(lightMain);\n\n  const lightDir1 = new THREE.SpotLight(whiteColor, 0.98251, 30, Math.PI / 4, 2, 2);\n  lightDir1.position.set(5, 7, 5);\n  lightDir1.castShadow = true;\n  scene.add(lightDir1);\n\n  [lightDir1].forEach(light => {\n    // Set up shadow properties for the light\n    light.shadow.mapSize.width = 1024; // default\n    light.shadow.mapSize.height = 1024; // default\n    light.shadow.camera.near = 0.15; // default\n    light.shadow.camera.far = 500; // default\n    light.shadow.bias = 0.0001; // default\n\n    const side = 15;\n    light.shadow.camera.top = side;\n    light.shadow.camera.bottom = -side;\n    light.shadow.camera.left = side;\n    light.shadow.camera.right = -side;\n  });\n\n  const floorMaterial = createFloorMaterial();\n  const glassMaterial = createGlassMaterial();\n  const snowMaterial = createSnowMaterial();\n  const blackMaterial = createBlackMaterial();\n  const orangeMaterial = createOrangeMaterial();\n\n  // ---------------------------------------------\n  // Земля\n  // ---------------------------------------------\n  {\n    const geometry = new THREE.PlaneGeometry(200, 200, 100, 100);\n    const plane = new THREE.Mesh(geometry, floorMaterial);\n    plane.rotation.x = -Math.PI * 0.5;\n    scene.add(plane);\n\n    const shadowPlane = new THREE.Mesh(geometry, new THREE.ShadowMaterial({ opacity: 0.5 }));\n    shadowPlane.rotation.x = -Math.PI * 0.5;\n    shadowPlane.rotation.y = 0.01;\n\n    shadowPlane.receiveShadow = true;\n    shadowPlane.castShadow = true;\n\n    scene.add(shadowPlane);\n  }\n\n  // ---------------------------------------------\n  // Снеговик\n  // ---------------------------------------------\n\n  const snowBalls = [];\n  {\n    const material = createSnowManMaterial();\n    for (let i = 0; i < 3; i += 1) {\n      const radius = 1 - i * 0.22;\n      const geometry = new THREE.DodecahedronGeometry(radius, 3);\n      geometry.vertices.forEach(v => {\n        v.x += randomInstance.range(-0.01, 0.01);\n        v.y += randomInstance.range(-0.01, 0.01);\n        v.z += randomInstance.range(-0.01, 0.01);\n      });\n      const mesh = new THREE.Mesh(geometry, material);\n\n      mesh.castShadow = true;\n      mesh.receiveShadow = true;\n\n      mesh.radius = radius;\n      mesh.position.y += 0.75 + i * 1.1;\n\n      scene.add(mesh);\n\n      snowBalls.push(mesh);\n    }\n  }\n\n  // ---------------------------------------------\n  // Пуговицы + глаза\n  // ---------------------------------------------\n\n  {\n    // Пуговицы\n    for (let i = 0; i < 3; i += 1) {\n      const radius = 0.075;\n      const geometry = new THREE.DodecahedronGeometry(radius, 1);\n      geometry.vertices.forEach(v => {\n        const rStep = radius * 0.05;\n        v.x += randomInstance.range(-rStep, rStep);\n        v.y += randomInstance.range(-rStep, rStep);\n        v.z += randomInstance.range(-rStep, rStep);\n      });\n      const mesh = new THREE.Mesh(geometry, blackMaterial);\n\n      mesh.castShadow = true;\n\n      const ballRadius = snowBalls[1].radius * 1.025;\n\n      mesh.position.x = ballRadius * Math.cos(Math.PI / 4 - i * (Math.PI / 7) - 0.1);\n      mesh.position.y = ballRadius * Math.sin(Math.PI / 4 - i * (Math.PI / 7) - 0.1) + snowBalls[1].position.y;\n      // mesh.position.y = snowBalls[1].position.y + spaceBetween * (i - 1 + .85);\n      scene.add(mesh);\n    }\n\n    // глаза\n    const ballRadius = snowBalls[2].radius * 0.825;\n\n    for (let i = -1; i <= 1; i += 2) {\n      const radius = 0.075;\n      const geometry = new THREE.DodecahedronGeometry(radius, 1);\n      geometry.vertices.forEach(v => {\n        const rStep = radius * 0.05;\n        v.x += randomInstance.range(-rStep, rStep);\n        v.y += randomInstance.range(-rStep, rStep);\n        v.z += randomInstance.range(-rStep, rStep);\n      });\n\n      const mesh = new THREE.Mesh(geometry, floorMaterial);\n\n      mesh.castShadow = true;\n\n      mesh.position.x = ballRadius * Math.cos(Math.PI / 4 - 0.25);\n      mesh.position.y = ballRadius * Math.sin(Math.PI / 4 - 0.25) + snowBalls[2].position.y;\n\n      mesh.position.x = ballRadius * Math.cos(i * 0.325);\n      mesh.position.z = ballRadius * Math.sin(i * 0.325);\n\n      scene.add(mesh);\n\n      // Линзы\n      const glassGeometry = new THREE.CircleGeometry(radius * 1.5, 20);\n      const glassMesh = new THREE.Mesh(glassGeometry, glassMaterial);\n      glassMesh.rotateY(Math.PI / 2);\n      glassMesh.castShadow = true;\n\n      glassMesh.position.copy(mesh.position);\n      glassMesh.position.x += 0.09;\n      glassMesh.rotateX(-Math.PI / 10);\n\n      scene.add(glassMesh);\n    }\n\n    // переносица\n    const perGeometry = new THREE.CylinderGeometry(0.01, 0.01, 0.1, 16, 10);\n\n    const perMesh = new THREE.Mesh(perGeometry, blackMaterial);\n    perMesh.castShadow = true;\n\n    perMesh.position.x = ballRadius * Math.cos(Math.PI / 4 - 0.25) + 0.125;\n    perMesh.position.y = ballRadius * Math.sin(Math.PI / 4 - 0.25) + snowBalls[2].position.y;\n    perMesh.rotateX(Math.PI / 2);\n\n    scene.add(perMesh);\n  }\n\n  // ---------------------------------------------\n  // Морковка\n  // ---------------------------------------------\n\n  {\n    const width = 0.51;\n    const geometry = new THREE.CylinderGeometry(0, width * 0.125, width, 16, 10);\n    geometry.vertices.forEach(v => {\n      const rStep = width * 0.015;\n      v.x += randomInstance.range(-rStep, rStep);\n      v.y += randomInstance.range(-rStep, rStep);\n      v.z += randomInstance.range(-rStep, rStep);\n    });\n    const mesh = new THREE.Mesh(geometry, orangeMaterial);\n    mesh.castShadow = true;\n\n    mesh.position.y = snowBalls[2].position.y;\n    mesh.position.x = snowBalls[2].radius * 0.95 + width / 2;\n    mesh.rotateZ(-Math.PI / 2);\n\n    scene.add(mesh);\n  }\n\n  // -------------------------\n  // Рот\n  // -------------------------\n\n  {\n    const material = createMouthMaterial();\n    const smileWidth = 0.51;\n    const geometry = new THREE.CylinderGeometry(smileWidth * 0.035, smileWidth * 0.035, smileWidth, 16, 10);\n    geometry.vertices.forEach(v => {\n      v.x -= v.y * v.y * 1.5;\n      v.z += v.y * v.y * 0.25 - v.x * v.x * 5.25;\n    });\n\n    const mesh = new THREE.Mesh(geometry, material);\n    mesh.castShadow = true;\n\n    mesh.position.y = snowBalls[2].position.y - snowBalls[2].radius * 0.35;\n    mesh.position.x = snowBalls[2].radius * 0.95;\n    mesh.rotateZ(-Math.PI / 2);\n    mesh.rotateX(-Math.PI / 2);\n\n    scene.add(mesh);\n\n    for (let i = -1; i <= 1; i += 2) {\n      const width = 0.125;\n      const geometry = new THREE.CylinderGeometry(width * 0.1275, width * 0.1275, width, 16, 10);\n\n      const mesh = new THREE.Mesh(geometry, material);\n      mesh.castShadow = true;\n\n      mesh.position.y = snowBalls[2].position.y - snowBalls[2].radius * 0.35 + smileWidth * 0.175;\n      mesh.position.x = snowBalls[2].radius * 0.95 - smileWidth * 0.075;\n      mesh.position.z = (smileWidth / 2) * i;\n      mesh.rotateZ(-Math.PI / 12);\n      mesh.rotateX((-Math.PI / 10) * i);\n\n      scene.add(mesh);\n    }\n  }\n\n  // ---------------------------------------------\n  // Шляпа\n  // ---------------------------------------------\n\n  {\n    const material = createHatMaterial();\n    const width = snowBalls[2].radius;\n    const geometry = new THREE.CylinderGeometry(width * 0.55, width * 0.5, width, 16, 10);\n    geometry.vertices.forEach(v => {\n      const rStep = width * 0.025;\n      if (v.y > -width / 2) {\n        v.x += randomInstance.range(-rStep, rStep);\n        v.y += randomInstance.range(-rStep, rStep);\n        v.z += randomInstance.range(-rStep, rStep);\n      } else {\n        v.x *= 2;\n        v.z *= 2;\n        v.y += randomInstance.range(-rStep * 2, rStep * 2);\n      }\n    });\n    geometry.center();\n    const mesh = new THREE.Mesh(geometry, material);\n    mesh.castShadow = true;\n\n    mesh.position.y = snowBalls[2].position.y + width / 2 + snowBalls[2].radius * 0.8;\n    // mesh.position.x = snowBalls[2].radius * 0.95 + width / 2;\n    // mesh.rotatex(-Math.PI / 2);\n    mesh.rotateX(-Math.PI / 11);\n    mesh.rotateZ(Math.PI / 15);\n    mesh.position.z -= 0.15;\n    mesh.position.x -= 0.1;\n\n    scene.add(mesh);\n  }\n\n  // ---------------------------------------------\n  // Палки\n  // ---------------------------------------------\n\n  const hands = [];\n  {\n    const material = createWoodMaterial();\n    const width = 0.8;\n    for (let i = -1; i <= 1; i += 2) {\n      const geometry = new THREE.CylinderGeometry(0.02, 0.075, width, 16, 10);\n      geometry.vertices.forEach(v => {\n        const rs = 0.1 * v.y;\n\n        v.y += width / 2 + randomInstance.range(-rs, rs);\n\n        v.x += Math.sin(v.y * 10) * 0.02 + randomInstance.range(-rs, rs);\n        v.z += Math.cos(v.y * 10) * 0.02 + randomInstance.range(-rs, rs);\n      });\n      // geometry.center();\n      const mesh = new THREE.Mesh(geometry, material);\n      mesh.castShadow = true;\n\n      mesh.position.y = snowBalls[1].position.y * 1.2;\n      mesh.position.z = snowBalls[1].radius * 0.8 * i;\n\n      mesh.rotateX(-Math.PI / 4 + (Math.PI / 3) * i);\n      mesh.rotateX(Math.PI / 4);\n\n      mesh.originalRotationX = mesh.rotation.x;\n\n      mesh.idx = i;\n      hands.push(mesh);\n\n      scene.add(mesh);\n    }\n  }\n\n  // -------------------------\n  // Снежок\n  // -------------------------\n\n  const particles = new THREE.Geometry(40, 40, 50, 50);\n  particles.vertices = particles.vertices.map(v => {\n    v.x += (randomInstance.value() - 0.5) * 0.05;\n    v.y += (randomInstance.value() - 0.5) * 4 + 6;\n    v.z += (randomInstance.value() - 0.5) * 0.05;\n    return v;\n  });\n\n  for (let i = 0; i < 50000; i += 1) {\n    particles.vertices.push(\n      new THREE.Vector3(\n        (randomInstance.value() - 0.5) * 40,\n        (randomInstance.value() - 0.5) * 4 + 6,\n        (randomInstance.value() - 0.5) * 40,\n      ),\n    );\n  }\n\n  const particleSystem = new THREE.Points(particles, snowMaterial);\n  particleSystem.position.y += 4;\n  particleSystem.sortParticles = true;\n\n  scene.add(particleSystem);\n\n  return {\n    resize({ pixelRatio, viewportWidth, viewportHeight }) {\n      renderer.setPixelRatio(pixelRatio);\n      renderer.setSize(viewportWidth, viewportHeight, false);\n      camera.aspect = viewportWidth / viewportHeight;\n      camera.updateProjectionMatrix();\n    },\n\n    render({ time }) {\n      if (!ready) {\n        return;\n      }\n\n      hands.forEach(mesh => {\n        mesh.rotation.x = mesh.originalRotationX + Math.sin(time * 7) * 0.3;\n      });\n\n      controls.target.set(0, target, 0);\n\n      floorMaterial.uniforms.iTime.value = time;\n      glassMaterial.uniforms.iTime.value = time;\n\n      snowMaterial.uniforms.iTime.value = time * 0.2;\n      snowMaterial.uniforms.camPosition = new THREE.Uniform(camera.position);\n\n      camera.position.y = Math.max(camera.position.y, 0.1);\n\n      controls.update();\n      renderer.render(scene, camera);\n    },\n\n    unload() {\n      controls.dispose();\n      renderer.dispose();\n\n      scPlayer.stop();\n    },\n  };\n};\n\nexport default { sketch, settings };\n"],"sourceRoot":""}